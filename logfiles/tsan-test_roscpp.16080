==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=16080)
  Cycle in lock order graph: M449 (0x7f8f671d70a8) => M452 (0x7f8f671d7148) => M449

  Mutex M452 acquired here while holding mutex M449 in main thread:
    #0 pthread_mutex_lock <null> (libtsan.so.0+0x3faeb)
    #1 log4cxx::helpers::synchronized::synchronized(log4cxx::helpers::Mutex const&) <null> (liblog4cxx.so.10+0x14acdb)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M449 acquired here while holding mutex M452 in main thread:
    #0 pthread_mutex_lock <null> (libtsan.so.0+0x3faeb)
    #1 log4cxx::helpers::synchronized::synchronized(log4cxx::helpers::Mutex const&) <null> (liblog4cxx.so.10+0x14acdb)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) (/usr/lib/x86_64-linux-gnu/libtsan.so.0+0x3faeb) in __interceptor_pthread_mutex_lock
==================
==================
WARNING: ThreadSanitizer: data race (pid=16080)
  Write of size 1 at 0x7fff226b2293 by thread T1:
    #0 readThread(boost::shared_ptr<ros::TransportTCP>, unsigned char*, unsigned int, int volatile*, bool volatile*) /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:127 (test_roscpp-test_transport_tcp+0x31e30)
    #1 void boost::_bi::list5<boost::_bi::value<boost::shared_ptr<ros::TransportTCP> >, boost::_bi::value<unsigned char*>, boost::_bi::value<unsigned long>, boost::_bi::value<int volatile*>, boost::_bi::value<bool volatile*> >::operator()<void (*)(boost::shared_ptr<ros::TransportTCP>, unsigned char*, unsigned int, int volatile*, bool volatile*), boost::_bi::list0>(boost::_bi::type<void>, void (*&)(boost::shared_ptr<ros::TransportTCP>, unsigned char*, unsigned int, int volatile*, bool volatile*), boost::_bi::list0&, int) /usr/include/boost/bind/bind.hpp:531 (test_roscpp-test_transport_tcp+0x50323)
    #2 boost::_bi::bind_t<void, void (*)(boost::shared_ptr<ros::TransportTCP>, unsigned char*, unsigned int, int volatile*, bool volatile*), boost::_bi::list5<boost::_bi::value<boost::shared_ptr<ros::TransportTCP> >, boost::_bi::value<unsigned char*>, boost::_bi::value<unsigned long>, boost::_bi::value<int volatile*>, boost::_bi::value<bool volatile*> > >::operator()() /usr/include/boost/bind/bind.hpp:1294 (test_roscpp-test_transport_tcp+0x4fbcf)
    #3 boost::detail::thread_data<boost::_bi::bind_t<void, void (*)(boost::shared_ptr<ros::TransportTCP>, unsigned char*, unsigned int, int volatile*, bool volatile*), boost::_bi::list5<boost::_bi::value<boost::shared_ptr<ros::TransportTCP> >, boost::_bi::value<unsigned char*>, boost::_bi::value<unsigned long>, boost::_bi::value<int volatile*>, boost::_bi::value<bool volatile*> > > >::run() /usr/include/boost/thread/detail/thread.hpp:116 (test_roscpp-test_transport_tcp+0x4eba8)
    #4 <null> <null> (libboost_thread.so.1.65.1+0x11bcc)

  Previous read of size 1 at 0x7fff226b2293 by main thread:
    #0 Synchronous_readWhileWriting_Test::TestBody() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:156 (test_roscpp-test_transport_tcp+0x3232a)
    #1 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #2 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #3 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2474 (libgtest.so+0x6c3dd)
    #4 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #5 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #6 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #7 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #8 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #9 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #10 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #11 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Location is stack of main thread.

  Location is global '<null>' at 0x000000000000 ([stack]+0x000000020293)

  Thread T1 (tid=16178, running) created by main thread at:
    #0 pthread_create <null> (libtsan.so.0+0x2bcfe)
    #1 boost::thread::start_thread_noexcept() <null> (libboost_thread.so.1.65.1+0x10b09)
    #2 boost::thread::thread<boost::_bi::bind_t<void, void (*)(boost::shared_ptr<ros::TransportTCP>, unsigned char*, unsigned int, int volatile*, bool volatile*), boost::_bi::list5<boost::_bi::value<boost::shared_ptr<ros::TransportTCP> >, boost::_bi::value<unsigned char*>, boost::_bi::value<unsigned long>, boost::_bi::value<int volatile*>, boost::_bi::value<bool volatile*> > > >(boost::_bi::bind_t<void, void (*)(boost::shared_ptr<ros::TransportTCP>, unsigned char*, unsigned int, int volatile*, bool volatile*), boost::_bi::list5<boost::_bi::value<boost::shared_ptr<ros::TransportTCP> >, boost::_bi::value<unsigned char*>, boost::_bi::value<unsigned long>, boost::_bi::value<int volatile*>, boost::_bi::value<bool volatile*> > >&&) /usr/include/boost/thread/detail/thread.hpp:273 (test_roscpp-test_transport_tcp+0x3fa37)
    #3 Synchronous_readWhileWriting_Test::TestBody() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:149 (test_roscpp-test_transport_tcp+0x3214c)
    #4 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #5 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #6 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2474 (libgtest.so+0x6c3dd)
    #7 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #8 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #9 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #10 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #11 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #12 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #13 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #14 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

SUMMARY: ThreadSanitizer: data race /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:127 in readThread(boost::shared_ptr<ros::TransportTCP>, unsigned char*, unsigned int, int volatile*, bool volatile*)
==================
==================
WARNING: ThreadSanitizer: data race (pid=16080)
  Read of size 4 at 0x7fff226b2294 by main thread:
    #0 testing::AssertionResult testing::internal::CmpHelperEQ<int volatile, int>(char const*, char const*, int volatile const&, int const&) /usr/src/googletest/googletest/include/gtest/gtest.h:1392 (test_roscpp-test_transport_tcp+0x43c39)
    #1 testing::AssertionResult testing::internal::EqHelper<false>::Compare<int volatile, int>(char const*, char const*, int volatile const&, int const&) /usr/src/googletest/googletest/include/gtest/gtest.h:1421 (test_roscpp-test_transport_tcp+0x3fc77)
    #2 Synchronous_readWhileWriting_Test::TestBody() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:162 (test_roscpp-test_transport_tcp+0x324b8)
    #3 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #4 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #5 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2474 (libgtest.so+0x6c3dd)
    #6 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #7 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #8 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #9 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #10 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #11 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #12 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #13 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Previous write of size 4 at 0x7fff226b2294 by thread T1:
    #0 readThread(boost::shared_ptr<ros::TransportTCP>, unsigned char*, unsigned int, int volatile*, bool volatile*) /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:125 (test_roscpp-test_transport_tcp+0x31e19)
    #1 void boost::_bi::list5<boost::_bi::value<boost::shared_ptr<ros::TransportTCP> >, boost::_bi::value<unsigned char*>, boost::_bi::value<unsigned long>, boost::_bi::value<int volatile*>, boost::_bi::value<bool volatile*> >::operator()<void (*)(boost::shared_ptr<ros::TransportTCP>, unsigned char*, unsigned int, int volatile*, bool volatile*), boost::_bi::list0>(boost::_bi::type<void>, void (*&)(boost::shared_ptr<ros::TransportTCP>, unsigned char*, unsigned int, int volatile*, bool volatile*), boost::_bi::list0&, int) /usr/include/boost/bind/bind.hpp:531 (test_roscpp-test_transport_tcp+0x50323)
    #2 boost::_bi::bind_t<void, void (*)(boost::shared_ptr<ros::TransportTCP>, unsigned char*, unsigned int, int volatile*, bool volatile*), boost::_bi::list5<boost::_bi::value<boost::shared_ptr<ros::TransportTCP> >, boost::_bi::value<unsigned char*>, boost::_bi::value<unsigned long>, boost::_bi::value<int volatile*>, boost::_bi::value<bool volatile*> > >::operator()() /usr/include/boost/bind/bind.hpp:1294 (test_roscpp-test_transport_tcp+0x4fbcf)
    #3 boost::detail::thread_data<boost::_bi::bind_t<void, void (*)(boost::shared_ptr<ros::TransportTCP>, unsigned char*, unsigned int, int volatile*, bool volatile*), boost::_bi::list5<boost::_bi::value<boost::shared_ptr<ros::TransportTCP> >, boost::_bi::value<unsigned char*>, boost::_bi::value<unsigned long>, boost::_bi::value<int volatile*>, boost::_bi::value<bool volatile*> > > >::run() /usr/include/boost/thread/detail/thread.hpp:116 (test_roscpp-test_transport_tcp+0x4eba8)
    #4 <null> <null> (libboost_thread.so.1.65.1+0x11bcc)

  As if synchronized via sleep:
    #0 nanosleep <null> (libtsan.so.0+0x4dd60)
    #1 boost::this_thread::no_interruption_point::hidden::sleep_until(timespec const&) <null> (libboost_thread.so.1.65.1+0x10dcd)
    #2 void boost::this_thread::sleep<boost::date_time::subsecond_duration<boost::posix_time::time_duration, 1000l> >(boost::date_time::subsecond_duration<boost::posix_time::time_duration, 1000l> const&) /usr/include/boost/thread/pthread/thread_data.hpp:293 (test_roscpp-test_transport_tcp+0x3fb59)
    #3 Synchronous_readWhileWriting_Test::TestBody() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:158 (test_roscpp-test_transport_tcp+0x3235b)
    #4 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #5 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #6 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2474 (libgtest.so+0x6c3dd)
    #7 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #8 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #9 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #10 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #11 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #12 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #13 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #14 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Location is stack of main thread.

  Location is global '<null>' at 0x000000000000 ([stack]+0x000000020294)

  Thread T1 (tid=16178, running) created by main thread at:
    #0 pthread_create <null> (libtsan.so.0+0x2bcfe)
    #1 boost::thread::start_thread_noexcept() <null> (libboost_thread.so.1.65.1+0x10b09)
    #2 boost::thread::thread<boost::_bi::bind_t<void, void (*)(boost::shared_ptr<ros::TransportTCP>, unsigned char*, unsigned int, int volatile*, bool volatile*), boost::_bi::list5<boost::_bi::value<boost::shared_ptr<ros::TransportTCP> >, boost::_bi::value<unsigned char*>, boost::_bi::value<unsigned long>, boost::_bi::value<int volatile*>, boost::_bi::value<bool volatile*> > > >(boost::_bi::bind_t<void, void (*)(boost::shared_ptr<ros::TransportTCP>, unsigned char*, unsigned int, int volatile*, bool volatile*), boost::_bi::list5<boost::_bi::value<boost::shared_ptr<ros::TransportTCP> >, boost::_bi::value<unsigned char*>, boost::_bi::value<unsigned long>, boost::_bi::value<int volatile*>, boost::_bi::value<bool volatile*> > >&&) /usr/include/boost/thread/detail/thread.hpp:273 (test_roscpp-test_transport_tcp+0x3fa37)
    #3 Synchronous_readWhileWriting_Test::TestBody() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:149 (test_roscpp-test_transport_tcp+0x3214c)
    #4 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #5 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #6 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2474 (libgtest.so+0x6c3dd)
    #7 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #8 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #9 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #10 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #11 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #12 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #13 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #14 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

SUMMARY: ThreadSanitizer: data race /usr/src/googletest/googletest/include/gtest/gtest.h:1392 in testing::AssertionResult testing::internal::CmpHelperEQ<int volatile, int>(char const*, char const*, int volatile const&, int const&)
==================
==================
WARNING: ThreadSanitizer: data race (pid=16080)
  Read of size 8 at 0x7f8f5c7e2000 by main thread:
    #0 strcmp <null> (libtsan.so.0+0x4e27a)
    #1 testing::internal::String::CStringEquals(char const*, char const*) /usr/src/googletest/googletest/src/gtest.cc:899 (libgtest.so+0x651e0)
    #2 testing::internal::CmpHelperSTREQ(char const*, char const*, char const*, char const*) /usr/src/googletest/googletest/src/gtest.cc:1491 (libgtest.so+0x68e1f)
    #3 Synchronous_readWhileWriting_Test::TestBody() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:163 (test_roscpp-test_transport_tcp+0x325bc)
    #4 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #5 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #6 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2474 (libgtest.so+0x6c3dd)
    #7 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #8 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #9 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #10 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #11 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #12 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #13 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #14 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Previous write of size 8 at 0x7f8f5c7e2000 by thread T1:
    #0 recv <null> (libtsan.so.0+0x4af46)
    #1 ros::TransportTCP::read(unsigned char*, unsigned int) <null> (libroscpp.so+0x1138af)
    #2 void boost::_bi::list5<boost::_bi::value<boost::shared_ptr<ros::TransportTCP> >, boost::_bi::value<unsigned char*>, boost::_bi::value<unsigned long>, boost::_bi::value<int volatile*>, boost::_bi::value<bool volatile*> >::operator()<void (*)(boost::shared_ptr<ros::TransportTCP>, unsigned char*, unsigned int, int volatile*, bool volatile*), boost::_bi::list0>(boost::_bi::type<void>, void (*&)(boost::shared_ptr<ros::TransportTCP>, unsigned char*, unsigned int, int volatile*, bool volatile*), boost::_bi::list0&, int) /usr/include/boost/bind/bind.hpp:531 (test_roscpp-test_transport_tcp+0x50323)
    #3 boost::_bi::bind_t<void, void (*)(boost::shared_ptr<ros::TransportTCP>, unsigned char*, unsigned int, int volatile*, bool volatile*), boost::_bi::list5<boost::_bi::value<boost::shared_ptr<ros::TransportTCP> >, boost::_bi::value<unsigned char*>, boost::_bi::value<unsigned long>, boost::_bi::value<int volatile*>, boost::_bi::value<bool volatile*> > >::operator()() /usr/include/boost/bind/bind.hpp:1294 (test_roscpp-test_transport_tcp+0x4fbcf)
    #4 boost::detail::thread_data<boost::_bi::bind_t<void, void (*)(boost::shared_ptr<ros::TransportTCP>, unsigned char*, unsigned int, int volatile*, bool volatile*), boost::_bi::list5<boost::_bi::value<boost::shared_ptr<ros::TransportTCP> >, boost::_bi::value<unsigned char*>, boost::_bi::value<unsigned long>, boost::_bi::value<int volatile*>, boost::_bi::value<bool volatile*> > > >::run() /usr/include/boost/thread/detail/thread.hpp:116 (test_roscpp-test_transport_tcp+0x4eba8)
    #5 <null> <null> (libboost_thread.so.1.65.1+0x11bcc)

  As if synchronized via sleep:
    #0 nanosleep <null> (libtsan.so.0+0x4dd60)
    #1 boost::this_thread::no_interruption_point::hidden::sleep_until(timespec const&) <null> (libboost_thread.so.1.65.1+0x10dcd)
    #2 void boost::this_thread::sleep<boost::date_time::subsecond_duration<boost::posix_time::time_duration, 1000l> >(boost::date_time::subsecond_duration<boost::posix_time::time_duration, 1000l> const&) /usr/include/boost/thread/pthread/thread_data.hpp:293 (test_roscpp-test_transport_tcp+0x3fb59)
    #3 Synchronous_readWhileWriting_Test::TestBody() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:158 (test_roscpp-test_transport_tcp+0x3235b)
    #4 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #5 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #6 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2474 (libgtest.so+0x6c3dd)
    #7 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #8 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #9 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #10 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #11 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #12 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #13 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #14 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Location is heap block of size 1048576 at 0x7f8f5c7e2000 allocated by main thread:
    #0 operator new[](unsigned long) <null> (libtsan.so.0+0x73fda)
    #1 Synchronous_readWhileWriting_Test::TestBody() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:135 (test_roscpp-test_transport_tcp+0x31eba)
    #2 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #3 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #4 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2474 (libgtest.so+0x6c3dd)
    #5 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #6 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #7 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #8 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #9 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #10 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #11 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #12 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Thread T1 (tid=16178, finished) created by main thread at:
    #0 pthread_create <null> (libtsan.so.0+0x2bcfe)
    #1 boost::thread::start_thread_noexcept() <null> (libboost_thread.so.1.65.1+0x10b09)
    #2 boost::thread::thread<boost::_bi::bind_t<void, void (*)(boost::shared_ptr<ros::TransportTCP>, unsigned char*, unsigned int, int volatile*, bool volatile*), boost::_bi::list5<boost::_bi::value<boost::shared_ptr<ros::TransportTCP> >, boost::_bi::value<unsigned char*>, boost::_bi::value<unsigned long>, boost::_bi::value<int volatile*>, boost::_bi::value<bool volatile*> > > >(boost::_bi::bind_t<void, void (*)(boost::shared_ptr<ros::TransportTCP>, unsigned char*, unsigned int, int volatile*, bool volatile*), boost::_bi::list5<boost::_bi::value<boost::shared_ptr<ros::TransportTCP> >, boost::_bi::value<unsigned char*>, boost::_bi::value<unsigned long>, boost::_bi::value<int volatile*>, boost::_bi::value<bool volatile*> > >&&) /usr/include/boost/thread/detail/thread.hpp:273 (test_roscpp-test_transport_tcp+0x3fa37)
    #3 Synchronous_readWhileWriting_Test::TestBody() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:149 (test_roscpp-test_transport_tcp+0x3214c)
    #4 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #5 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #6 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2474 (libgtest.so+0x6c3dd)
    #7 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #8 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #9 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #10 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #11 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #12 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #13 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #14 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

SUMMARY: ThreadSanitizer: data race (/usr/lib/x86_64-linux-gnu/libtsan.so.0+0x4e27a) in __interceptor_strcmp
==================
==================
WARNING: ThreadSanitizer: data race (pid=16080)
  Write of size 8 at 0x7b4800000030 by thread T11 (mutexes: write M709):
    #0 std::enable_if<std::__and_<std::__not_<std::__is_tuple_like<ros::TransportTCP*> >, std::is_move_constructible<ros::TransportTCP*>, std::is_move_assignable<ros::TransportTCP*> >::value, void>::type std::swap<ros::TransportTCP*>(ros::TransportTCP*&, ros::TransportTCP*&) /usr/include/c++/7/bits/move.h:200 (test_roscpp-test_transport_tcp+0x466a7)
    #1 boost::shared_ptr<ros::TransportTCP>::swap(boost::shared_ptr<ros::TransportTCP>&) /usr/include/boost/smart_ptr/shared_ptr.hpp:766 (test_roscpp-test_transport_tcp+0x4330c)
    #2 boost::shared_ptr<ros::TransportTCP>::operator=(boost::shared_ptr<ros::TransportTCP> const&) /usr/include/boost/smart_ptr/shared_ptr.hpp:549 (test_roscpp-test_transport_tcp+0x3fd03)
    #3 Polled::connectionReceived(boost::shared_ptr<ros::TransportTCP> const&) /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:201 (test_roscpp-test_transport_tcp+0x3b440)
    #4 boost::_mfi::mf1<void, Polled, boost::shared_ptr<ros::TransportTCP> const&>::operator()(Polled*, boost::shared_ptr<ros::TransportTCP> const&) const /usr/include/boost/bind/mem_fn_template.hpp:165 (test_roscpp-test_transport_tcp+0x4c92c)
    #5 void boost::_bi::list2<boost::_bi::value<Polled*>, boost::arg<1> >::operator()<boost::_mfi::mf1<void, Polled, boost::shared_ptr<ros::TransportTCP> const&>, boost::_bi::rrlist1<boost::shared_ptr<ros::TransportTCP> const&> >(boost::_bi::type<void>, boost::_mfi::mf1<void, Polled, boost::shared_ptr<ros::TransportTCP> const&>&, boost::_bi::rrlist1<boost::shared_ptr<ros::TransportTCP> const&>&, int) /usr/include/boost/bind/bind.hpp:319 (test_roscpp-test_transport_tcp+0x4bbea)
    #6 void boost::_bi::bind_t<void, boost::_mfi::mf1<void, Polled, boost::shared_ptr<ros::TransportTCP> const&>, boost::_bi::list2<boost::_bi::value<Polled*>, boost::arg<1> > >::operator()<boost::shared_ptr<ros::TransportTCP> const&>(boost::shared_ptr<ros::TransportTCP> const&) /usr/include/boost/bind/bind.hpp:1306 (test_roscpp-test_transport_tcp+0x4a8f2)
    #7 boost::detail::function::void_function_obj_invoker1<boost::_bi::bind_t<void, boost::_mfi::mf1<void, Polled, boost::shared_ptr<ros::TransportTCP> const&>, boost::_bi::list2<boost::_bi::value<Polled*>, boost::arg<1> > >, void, boost::shared_ptr<ros::TransportTCP> const&>::invoke(boost::detail::function::function_buffer&, boost::shared_ptr<ros::TransportTCP> const&) /usr/include/boost/function/function_template.hpp:159 (test_roscpp-test_transport_tcp+0x4925c)
    #8 ros::TransportTCP::socketUpdate(int) <null> (libroscpp.so+0x119658)
    #9 boost::_mfi::mf0<void, Polled>::operator()(Polled*) const /usr/include/boost/bind/mem_fn_template.hpp:49 (test_roscpp-test_transport_tcp+0x50497)
    #10 void boost::_bi::list1<boost::_bi::value<Polled*> >::operator()<boost::_mfi::mf0<void, Polled>, boost::_bi::list0>(boost::_bi::type<void>, boost::_mfi::mf0<void, Polled>&, boost::_bi::list0&, int) /usr/include/boost/bind/bind.hpp:259 (test_roscpp-test_transport_tcp+0x501d3)
    #11 boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > >::operator()() /usr/include/boost/bind/bind.hpp:1294 (test_roscpp-test_transport_tcp+0x4fb41)
    #12 boost::detail::thread_data<boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > > >::run() /usr/include/boost/thread/detail/thread.hpp:116 (test_roscpp-test_transport_tcp+0x4eb5c)
    #13 <null> <null> (libboost_thread.so.1.65.1+0x11bcc)

  Previous read of size 8 at 0x7b4800000030 by main thread:
    #0 boost::shared_ptr<ros::TransportTCP>::operator!() const /usr/include/boost/smart_ptr/detail/operator_bool.hpp:63 (test_roscpp-test_transport_tcp+0x3f2d6)
    #1 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:271 (test_roscpp-test_transport_tcp+0x3bfcc)
    #2 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #3 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #4 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #5 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #6 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #7 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #8 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #9 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #10 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #11 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #12 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Location is heap block of size 360 at 0x7b4800000000 allocated by main thread:
    #0 operator new(unsigned long) <null> (libtsan.so.0+0x73f0a)
    #1 testing::internal::TestFactoryImpl<Polled_readAndWrite_Test>::CreateTest() /usr/src/googletest/googletest/include/gtest/internal/gtest-internal.h:484 (test_roscpp-test_transport_tcp+0x4f684)
    #2 testing::Test* testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::TestFactoryBase, testing::Test*>(testing::internal::TestFactoryBase*, testing::Test* (testing::internal::TestFactoryBase::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9b045)
    #3 testing::Test* testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::TestFactoryBase, testing::Test*>(testing::internal::TestFactoryBase*, testing::Test* (testing::internal::TestFactoryBase::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x920ff)
    #4 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2649 (libgtest.so+0x6cf84)
    #5 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #6 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #7 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #8 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #9 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #10 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #11 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Mutex M709 (0x7b54000000c0) created at:
    #0 pthread_mutex_init <null> (libtsan.so.0+0x2c5bd)
    #1 ros::TransportTCP::TransportTCP(ros::PollSet*, int) <null> (libroscpp.so+0x112d4f)
    #2 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:254 (test_roscpp-test_transport_tcp+0x3bc5a)
    #3 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #4 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #5 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #6 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #7 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #8 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #9 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #10 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #11 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #12 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #13 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Thread T11 (tid=27207, running) created by main thread at:
    #0 pthread_create <null> (libtsan.so.0+0x2bcfe)
    #1 boost::thread::start_thread_noexcept() <null> (libboost_thread.so.1.65.1+0x10b09)
    #2 boost::thread::thread<boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > > >(boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > >&&) /usr/include/boost/thread/detail/thread.hpp:273 (test_roscpp-test_transport_tcp+0x40207)
    #3 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:268 (test_roscpp-test_transport_tcp+0x3bf80)
    #4 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #5 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #6 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #7 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #8 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #9 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #10 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #11 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #12 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #13 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #14 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

SUMMARY: ThreadSanitizer: data race /usr/include/c++/7/bits/move.h:200 in std::enable_if<std::__and_<std::__not_<std::__is_tuple_like<ros::TransportTCP*> >, std::is_move_constructible<ros::TransportTCP*>, std::is_move_assignable<ros::TransportTCP*> >::value, void>::type std::swap<ros::TransportTCP*>(ros::TransportTCP*&, ros::TransportTCP*&)
==================
==================
WARNING: ThreadSanitizer: data race (pid=16080)
  Read of size 8 at 0x7b540000ff58 by main thread:
    #0 boost::function_base::empty() const /usr/include/boost/function/function_base.hpp:601 (test_roscpp-test_transport_tcp+0x377d0)
    #1 boost::function1<void, boost::shared_ptr<ros::Transport> const&>::move_assign(boost::function1<void, boost::shared_ptr<ros::Transport> const&>&) /usr/include/boost/function/function_template.hpp:983 (test_roscpp-test_transport_tcp+0x45a56)
    #2 boost::function1<void, boost::shared_ptr<ros::Transport> const&>::swap(boost::function1<void, boost::shared_ptr<ros::Transport> const&>&) /usr/include/boost/function/function_template.hpp:859 (test_roscpp-test_transport_tcp+0x423f2)
    #3 boost::function<void (boost::shared_ptr<ros::Transport> const&)>::operator=(boost::function<void (boost::shared_ptr<ros::Transport> const&)> const&) /usr/include/boost/function/function_template.hpp:1092 (test_roscpp-test_transport_tcp+0x3e11f)
    #4 ros::Transport::setReadCallback(boost::function<void (boost::shared_ptr<ros::Transport> const&)> const&) /opt/ros/melodic/include/ros/transport/transport.h:113 (test_roscpp-test_transport_tcp+0x397c7)
    #5 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:282 (test_roscpp-test_transport_tcp+0x3c20d)
    #6 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #7 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #8 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #9 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #10 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #11 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #12 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #13 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #14 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #15 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #16 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Previous write of size 8 at 0x7b540000ff58 by thread T11 (mutexes: write M709):
    #0 operator new(unsigned long) <null> (libtsan.so.0+0x73f0a)
    #1 boost::detail::sp_if_not_array<ros::TransportTCP>::type boost::make_shared<ros::TransportTCP, ros::PollSet*&, int&>(ros::PollSet*&, int&) <null> (libroscpp.so+0x119f6a)
    #2 boost::_mfi::mf0<void, Polled>::operator()(Polled*) const /usr/include/boost/bind/mem_fn_template.hpp:49 (test_roscpp-test_transport_tcp+0x50497)
    #3 void boost::_bi::list1<boost::_bi::value<Polled*> >::operator()<boost::_mfi::mf0<void, Polled>, boost::_bi::list0>(boost::_bi::type<void>, boost::_mfi::mf0<void, Polled>&, boost::_bi::list0&, int) /usr/include/boost/bind/bind.hpp:259 (test_roscpp-test_transport_tcp+0x501d3)
    #4 boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > >::operator()() /usr/include/boost/bind/bind.hpp:1294 (test_roscpp-test_transport_tcp+0x4fb41)
    #5 boost::detail::thread_data<boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > > >::run() /usr/include/boost/thread/detail/thread.hpp:116 (test_roscpp-test_transport_tcp+0x4eb5c)
    #6 <null> <null> (libboost_thread.so.1.65.1+0x11bcc)

  As if synchronized via sleep:
    #0 nanosleep <null> (libtsan.so.0+0x4dd60)
    #1 boost::this_thread::no_interruption_point::hidden::sleep_until(timespec const&) <null> (libboost_thread.so.1.65.1+0x10dcd)
    #2 void boost::this_thread::sleep<boost::date_time::subsecond_duration<boost::posix_time::time_duration, 1000l> >(boost::date_time::subsecond_duration<boost::posix_time::time_duration, 1000l> const&) /usr/include/boost/thread/pthread/thread_data.hpp:293 (test_roscpp-test_transport_tcp+0x3fb59)
    #3 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:273 (test_roscpp-test_transport_tcp+0x3c006)
    #4 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #5 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #6 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #7 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #8 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #9 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #10 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #11 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #12 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #13 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #14 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Location is heap block of size 640 at 0x7b540000ff00 allocated by thread T11:
    #0 operator new(unsigned long) <null> (libtsan.so.0+0x73f0a)
    #1 boost::detail::sp_if_not_array<ros::TransportTCP>::type boost::make_shared<ros::TransportTCP, ros::PollSet*&, int&>(ros::PollSet*&, int&) <null> (libroscpp.so+0x119f6a)
    #2 boost::_mfi::mf0<void, Polled>::operator()(Polled*) const /usr/include/boost/bind/mem_fn_template.hpp:49 (test_roscpp-test_transport_tcp+0x50497)
    #3 void boost::_bi::list1<boost::_bi::value<Polled*> >::operator()<boost::_mfi::mf0<void, Polled>, boost::_bi::list0>(boost::_bi::type<void>, boost::_mfi::mf0<void, Polled>&, boost::_bi::list0&, int) /usr/include/boost/bind/bind.hpp:259 (test_roscpp-test_transport_tcp+0x501d3)
    #4 boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > >::operator()() /usr/include/boost/bind/bind.hpp:1294 (test_roscpp-test_transport_tcp+0x4fb41)
    #5 boost::detail::thread_data<boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > > >::run() /usr/include/boost/thread/detail/thread.hpp:116 (test_roscpp-test_transport_tcp+0x4eb5c)
    #6 <null> <null> (libboost_thread.so.1.65.1+0x11bcc)

  Mutex M709 (0x7b54000000c0) created at:
    #0 pthread_mutex_init <null> (libtsan.so.0+0x2c5bd)
    #1 ros::TransportTCP::TransportTCP(ros::PollSet*, int) <null> (libroscpp.so+0x112d4f)
    #2 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:254 (test_roscpp-test_transport_tcp+0x3bc5a)
    #3 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #4 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #5 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #6 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #7 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #8 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #9 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #10 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #11 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #12 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #13 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Thread T11 (tid=27207, running) created by main thread at:
    #0 pthread_create <null> (libtsan.so.0+0x2bcfe)
    #1 boost::thread::start_thread_noexcept() <null> (libboost_thread.so.1.65.1+0x10b09)
    #2 boost::thread::thread<boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > > >(boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > >&&) /usr/include/boost/thread/detail/thread.hpp:273 (test_roscpp-test_transport_tcp+0x40207)
    #3 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:268 (test_roscpp-test_transport_tcp+0x3bf80)
    #4 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #5 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #6 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #7 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #8 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #9 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #10 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #11 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #12 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #13 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #14 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

SUMMARY: ThreadSanitizer: data race /usr/include/boost/function/function_base.hpp:601 in boost::function_base::empty() const
==================
==================
WARNING: ThreadSanitizer: data race (pid=16080)
  Write of size 8 at 0x7b540000ff60 by main thread:
    #0 boost::detail::function::functor_manager<boost::_bi::bind_t<void, boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>, boost::_bi::list3<boost::_bi::value<Polled*>, boost::arg<1>, boost::_bi::value<int> > > >::manager(boost::detail::function::function_buffer const&, boost::detail::function::function_buffer&, boost::detail::function::functor_manager_operation_type, mpl_::bool_<false>) /usr/include/boost/function/function_base.hpp:352 (test_roscpp-test_transport_tcp+0x4bfb7)
    #1 boost::detail::function::functor_manager<boost::_bi::bind_t<void, boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>, boost::_bi::list3<boost::_bi::value<Polled*>, boost::arg<1>, boost::_bi::value<int> > > >::manager(boost::detail::function::function_buffer const&, boost::detail::function::function_buffer&, boost::detail::function::functor_manager_operation_type, boost::detail::function::function_obj_tag) /usr/include/boost/function/function_base.hpp:379 (test_roscpp-test_transport_tcp+0x4ab2f)
    #2 boost::detail::function::functor_manager<boost::_bi::bind_t<void, boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>, boost::_bi::list3<boost::_bi::value<Polled*>, boost::arg<1>, boost::_bi::value<int> > > >::manage(boost::detail::function::function_buffer const&, boost::detail::function::function_buffer&, boost::detail::function::functor_manager_operation_type) /usr/include/boost/function/function_base.hpp:407 (test_roscpp-test_transport_tcp+0x4952e)
    #3 boost::function1<void, boost::shared_ptr<ros::Transport> const&>::move_assign(boost::function1<void, boost::shared_ptr<ros::Transport> const&>&) /usr/include/boost/function/function_template.hpp:988 (test_roscpp-test_transport_tcp+0x45b1a)
    #4 boost::function1<void, boost::shared_ptr<ros::Transport> const&>::swap(boost::function1<void, boost::shared_ptr<ros::Transport> const&>&) /usr/include/boost/function/function_template.hpp:860 (test_roscpp-test_transport_tcp+0x42405)
    #5 boost::function<void (boost::shared_ptr<ros::Transport> const&)>::operator=(boost::function<void (boost::shared_ptr<ros::Transport> const&)> const&) /usr/include/boost/function/function_template.hpp:1092 (test_roscpp-test_transport_tcp+0x3e11f)
    #6 ros::Transport::setReadCallback(boost::function<void (boost::shared_ptr<ros::Transport> const&)> const&) /opt/ros/melodic/include/ros/transport/transport.h:113 (test_roscpp-test_transport_tcp+0x397c7)
    #7 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:282 (test_roscpp-test_transport_tcp+0x3c20d)
    #8 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #9 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #10 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #11 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #12 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #13 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #14 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #15 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #16 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #17 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #18 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Previous write of size 8 at 0x7b540000ff60 by thread T11 (mutexes: write M709):
    #0 operator new(unsigned long) <null> (libtsan.so.0+0x73f0a)
    #1 boost::detail::sp_if_not_array<ros::TransportTCP>::type boost::make_shared<ros::TransportTCP, ros::PollSet*&, int&>(ros::PollSet*&, int&) <null> (libroscpp.so+0x119f6a)
    #2 boost::_mfi::mf0<void, Polled>::operator()(Polled*) const /usr/include/boost/bind/mem_fn_template.hpp:49 (test_roscpp-test_transport_tcp+0x50497)
    #3 void boost::_bi::list1<boost::_bi::value<Polled*> >::operator()<boost::_mfi::mf0<void, Polled>, boost::_bi::list0>(boost::_bi::type<void>, boost::_mfi::mf0<void, Polled>&, boost::_bi::list0&, int) /usr/include/boost/bind/bind.hpp:259 (test_roscpp-test_transport_tcp+0x501d3)
    #4 boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > >::operator()() /usr/include/boost/bind/bind.hpp:1294 (test_roscpp-test_transport_tcp+0x4fb41)
    #5 boost::detail::thread_data<boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > > >::run() /usr/include/boost/thread/detail/thread.hpp:116 (test_roscpp-test_transport_tcp+0x4eb5c)
    #6 <null> <null> (libboost_thread.so.1.65.1+0x11bcc)

  As if synchronized via sleep:
    #0 nanosleep <null> (libtsan.so.0+0x4dd60)
    #1 boost::this_thread::no_interruption_point::hidden::sleep_until(timespec const&) <null> (libboost_thread.so.1.65.1+0x10dcd)
    #2 void boost::this_thread::sleep<boost::date_time::subsecond_duration<boost::posix_time::time_duration, 1000l> >(boost::date_time::subsecond_duration<boost::posix_time::time_duration, 1000l> const&) /usr/include/boost/thread/pthread/thread_data.hpp:293 (test_roscpp-test_transport_tcp+0x3fb59)
    #3 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:273 (test_roscpp-test_transport_tcp+0x3c006)
    #4 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #5 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #6 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #7 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #8 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #9 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #10 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #11 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #12 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #13 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #14 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Location is heap block of size 640 at 0x7b540000ff00 allocated by thread T11:
    #0 operator new(unsigned long) <null> (libtsan.so.0+0x73f0a)
    #1 boost::detail::sp_if_not_array<ros::TransportTCP>::type boost::make_shared<ros::TransportTCP, ros::PollSet*&, int&>(ros::PollSet*&, int&) <null> (libroscpp.so+0x119f6a)
    #2 boost::_mfi::mf0<void, Polled>::operator()(Polled*) const /usr/include/boost/bind/mem_fn_template.hpp:49 (test_roscpp-test_transport_tcp+0x50497)
    #3 void boost::_bi::list1<boost::_bi::value<Polled*> >::operator()<boost::_mfi::mf0<void, Polled>, boost::_bi::list0>(boost::_bi::type<void>, boost::_mfi::mf0<void, Polled>&, boost::_bi::list0&, int) /usr/include/boost/bind/bind.hpp:259 (test_roscpp-test_transport_tcp+0x501d3)
    #4 boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > >::operator()() /usr/include/boost/bind/bind.hpp:1294 (test_roscpp-test_transport_tcp+0x4fb41)
    #5 boost::detail::thread_data<boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > > >::run() /usr/include/boost/thread/detail/thread.hpp:116 (test_roscpp-test_transport_tcp+0x4eb5c)
    #6 <null> <null> (libboost_thread.so.1.65.1+0x11bcc)

  Mutex M709 (0x7b54000000c0) created at:
    #0 pthread_mutex_init <null> (libtsan.so.0+0x2c5bd)
    #1 ros::TransportTCP::TransportTCP(ros::PollSet*, int) <null> (libroscpp.so+0x112d4f)
    #2 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:254 (test_roscpp-test_transport_tcp+0x3bc5a)
    #3 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #4 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #5 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #6 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #7 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #8 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #9 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #10 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #11 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #12 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #13 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Thread T11 (tid=27207, running) created by main thread at:
    #0 pthread_create <null> (libtsan.so.0+0x2bcfe)
    #1 boost::thread::start_thread_noexcept() <null> (libboost_thread.so.1.65.1+0x10b09)
    #2 boost::thread::thread<boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > > >(boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > >&&) /usr/include/boost/thread/detail/thread.hpp:273 (test_roscpp-test_transport_tcp+0x40207)
    #3 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:268 (test_roscpp-test_transport_tcp+0x3bf80)
    #4 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #5 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #6 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #7 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #8 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #9 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #10 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #11 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #12 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #13 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #14 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

SUMMARY: ThreadSanitizer: data race /usr/include/boost/function/function_base.hpp:352 in boost::detail::function::functor_manager<boost::_bi::bind_t<void, boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>, boost::_bi::list3<boost::_bi::value<Polled*>, boost::arg<1>, boost::_bi::value<int> > > >::manager(boost::detail::function::function_buffer const&, boost::detail::function::function_buffer&, boost::detail::function::functor_manager_operation_type, mpl_::bool_<false>)
==================
==================
WARNING: ThreadSanitizer: data race (pid=16080)
  Read of size 8 at 0x7b540000ff78 by main thread:
    #0 boost::function_base::empty() const /usr/include/boost/function/function_base.hpp:601 (test_roscpp-test_transport_tcp+0x377d0)
    #1 boost::function1<void, boost::shared_ptr<ros::Transport> const&>::move_assign(boost::function1<void, boost::shared_ptr<ros::Transport> const&>&) /usr/include/boost/function/function_template.hpp:983 (test_roscpp-test_transport_tcp+0x45a56)
    #2 boost::function1<void, boost::shared_ptr<ros::Transport> const&>::swap(boost::function1<void, boost::shared_ptr<ros::Transport> const&>&) /usr/include/boost/function/function_template.hpp:859 (test_roscpp-test_transport_tcp+0x423f2)
    #3 boost::function<void (boost::shared_ptr<ros::Transport> const&)>::operator=(boost::function<void (boost::shared_ptr<ros::Transport> const&)> const&) /usr/include/boost/function/function_template.hpp:1092 (test_roscpp-test_transport_tcp+0x3e11f)
    #4 ros::Transport::setWriteCallback(boost::function<void (boost::shared_ptr<ros::Transport> const&)> const&) /opt/ros/melodic/include/ros/transport/transport.h:117 (test_roscpp-test_transport_tcp+0x3981d)
    #5 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:284 (test_roscpp-test_transport_tcp+0x3c393)
    #6 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #7 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #8 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #9 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #10 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #11 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #12 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #13 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #14 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #15 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #16 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Previous write of size 8 at 0x7b540000ff78 by thread T11 (mutexes: write M709):
    #0 operator new(unsigned long) <null> (libtsan.so.0+0x73f0a)
    #1 boost::detail::sp_if_not_array<ros::TransportTCP>::type boost::make_shared<ros::TransportTCP, ros::PollSet*&, int&>(ros::PollSet*&, int&) <null> (libroscpp.so+0x119f6a)
    #2 boost::_mfi::mf0<void, Polled>::operator()(Polled*) const /usr/include/boost/bind/mem_fn_template.hpp:49 (test_roscpp-test_transport_tcp+0x50497)
    #3 void boost::_bi::list1<boost::_bi::value<Polled*> >::operator()<boost::_mfi::mf0<void, Polled>, boost::_bi::list0>(boost::_bi::type<void>, boost::_mfi::mf0<void, Polled>&, boost::_bi::list0&, int) /usr/include/boost/bind/bind.hpp:259 (test_roscpp-test_transport_tcp+0x501d3)
    #4 boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > >::operator()() /usr/include/boost/bind/bind.hpp:1294 (test_roscpp-test_transport_tcp+0x4fb41)
    #5 boost::detail::thread_data<boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > > >::run() /usr/include/boost/thread/detail/thread.hpp:116 (test_roscpp-test_transport_tcp+0x4eb5c)
    #6 <null> <null> (libboost_thread.so.1.65.1+0x11bcc)

  As if synchronized via sleep:
    #0 nanosleep <null> (libtsan.so.0+0x4dd60)
    #1 boost::this_thread::no_interruption_point::hidden::sleep_until(timespec const&) <null> (libboost_thread.so.1.65.1+0x10dcd)
    #2 void boost::this_thread::sleep<boost::date_time::subsecond_duration<boost::posix_time::time_duration, 1000l> >(boost::date_time::subsecond_duration<boost::posix_time::time_duration, 1000l> const&) /usr/include/boost/thread/pthread/thread_data.hpp:293 (test_roscpp-test_transport_tcp+0x3fb59)
    #3 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:273 (test_roscpp-test_transport_tcp+0x3c006)
    #4 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #5 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #6 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #7 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #8 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #9 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #10 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #11 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #12 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #13 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #14 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Location is heap block of size 640 at 0x7b540000ff00 allocated by thread T11:
    #0 operator new(unsigned long) <null> (libtsan.so.0+0x73f0a)
    #1 boost::detail::sp_if_not_array<ros::TransportTCP>::type boost::make_shared<ros::TransportTCP, ros::PollSet*&, int&>(ros::PollSet*&, int&) <null> (libroscpp.so+0x119f6a)
    #2 boost::_mfi::mf0<void, Polled>::operator()(Polled*) const /usr/include/boost/bind/mem_fn_template.hpp:49 (test_roscpp-test_transport_tcp+0x50497)
    #3 void boost::_bi::list1<boost::_bi::value<Polled*> >::operator()<boost::_mfi::mf0<void, Polled>, boost::_bi::list0>(boost::_bi::type<void>, boost::_mfi::mf0<void, Polled>&, boost::_bi::list0&, int) /usr/include/boost/bind/bind.hpp:259 (test_roscpp-test_transport_tcp+0x501d3)
    #4 boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > >::operator()() /usr/include/boost/bind/bind.hpp:1294 (test_roscpp-test_transport_tcp+0x4fb41)
    #5 boost::detail::thread_data<boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > > >::run() /usr/include/boost/thread/detail/thread.hpp:116 (test_roscpp-test_transport_tcp+0x4eb5c)
    #6 <null> <null> (libboost_thread.so.1.65.1+0x11bcc)

  Mutex M709 (0x7b54000000c0) created at:
    #0 pthread_mutex_init <null> (libtsan.so.0+0x2c5bd)
    #1 ros::TransportTCP::TransportTCP(ros::PollSet*, int) <null> (libroscpp.so+0x112d4f)
    #2 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:254 (test_roscpp-test_transport_tcp+0x3bc5a)
    #3 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #4 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #5 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #6 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #7 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #8 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #9 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #10 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #11 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #12 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #13 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Thread T11 (tid=27207, running) created by main thread at:
    #0 pthread_create <null> (libtsan.so.0+0x2bcfe)
    #1 boost::thread::start_thread_noexcept() <null> (libboost_thread.so.1.65.1+0x10b09)
    #2 boost::thread::thread<boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > > >(boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > >&&) /usr/include/boost/thread/detail/thread.hpp:273 (test_roscpp-test_transport_tcp+0x40207)
    #3 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:268 (test_roscpp-test_transport_tcp+0x3bf80)
    #4 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #5 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #6 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #7 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #8 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #9 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #10 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #11 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #12 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #13 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #14 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

SUMMARY: ThreadSanitizer: data race /usr/include/boost/function/function_base.hpp:601 in boost::function_base::empty() const
==================
==================
WARNING: ThreadSanitizer: data race (pid=16080)
  Write of size 8 at 0x7b540000ff80 by main thread:
    #0 boost::detail::function::functor_manager<boost::_bi::bind_t<void, boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>, boost::_bi::list3<boost::_bi::value<Polled*>, boost::arg<1>, boost::_bi::value<int> > > >::manager(boost::detail::function::function_buffer const&, boost::detail::function::function_buffer&, boost::detail::function::functor_manager_operation_type, mpl_::bool_<false>) /usr/include/boost/function/function_base.hpp:352 (test_roscpp-test_transport_tcp+0x4bfb7)
    #1 boost::detail::function::functor_manager<boost::_bi::bind_t<void, boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>, boost::_bi::list3<boost::_bi::value<Polled*>, boost::arg<1>, boost::_bi::value<int> > > >::manager(boost::detail::function::function_buffer const&, boost::detail::function::function_buffer&, boost::detail::function::functor_manager_operation_type, boost::detail::function::function_obj_tag) /usr/include/boost/function/function_base.hpp:379 (test_roscpp-test_transport_tcp+0x4ab2f)
    #2 boost::detail::function::functor_manager<boost::_bi::bind_t<void, boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>, boost::_bi::list3<boost::_bi::value<Polled*>, boost::arg<1>, boost::_bi::value<int> > > >::manage(boost::detail::function::function_buffer const&, boost::detail::function::function_buffer&, boost::detail::function::functor_manager_operation_type) /usr/include/boost/function/function_base.hpp:407 (test_roscpp-test_transport_tcp+0x4952e)
    #3 boost::function1<void, boost::shared_ptr<ros::Transport> const&>::move_assign(boost::function1<void, boost::shared_ptr<ros::Transport> const&>&) /usr/include/boost/function/function_template.hpp:988 (test_roscpp-test_transport_tcp+0x45b1a)
    #4 boost::function1<void, boost::shared_ptr<ros::Transport> const&>::swap(boost::function1<void, boost::shared_ptr<ros::Transport> const&>&) /usr/include/boost/function/function_template.hpp:860 (test_roscpp-test_transport_tcp+0x42405)
    #5 boost::function<void (boost::shared_ptr<ros::Transport> const&)>::operator=(boost::function<void (boost::shared_ptr<ros::Transport> const&)> const&) /usr/include/boost/function/function_template.hpp:1092 (test_roscpp-test_transport_tcp+0x3e11f)
    #6 ros::Transport::setWriteCallback(boost::function<void (boost::shared_ptr<ros::Transport> const&)> const&) /opt/ros/melodic/include/ros/transport/transport.h:117 (test_roscpp-test_transport_tcp+0x3981d)
    #7 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:284 (test_roscpp-test_transport_tcp+0x3c393)
    #8 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #9 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #10 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #11 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #12 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #13 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #14 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #15 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #16 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #17 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #18 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Previous write of size 8 at 0x7b540000ff80 by thread T11 (mutexes: write M709):
    #0 operator new(unsigned long) <null> (libtsan.so.0+0x73f0a)
    #1 boost::detail::sp_if_not_array<ros::TransportTCP>::type boost::make_shared<ros::TransportTCP, ros::PollSet*&, int&>(ros::PollSet*&, int&) <null> (libroscpp.so+0x119f6a)
    #2 boost::_mfi::mf0<void, Polled>::operator()(Polled*) const /usr/include/boost/bind/mem_fn_template.hpp:49 (test_roscpp-test_transport_tcp+0x50497)
    #3 void boost::_bi::list1<boost::_bi::value<Polled*> >::operator()<boost::_mfi::mf0<void, Polled>, boost::_bi::list0>(boost::_bi::type<void>, boost::_mfi::mf0<void, Polled>&, boost::_bi::list0&, int) /usr/include/boost/bind/bind.hpp:259 (test_roscpp-test_transport_tcp+0x501d3)
    #4 boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > >::operator()() /usr/include/boost/bind/bind.hpp:1294 (test_roscpp-test_transport_tcp+0x4fb41)
    #5 boost::detail::thread_data<boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > > >::run() /usr/include/boost/thread/detail/thread.hpp:116 (test_roscpp-test_transport_tcp+0x4eb5c)
    #6 <null> <null> (libboost_thread.so.1.65.1+0x11bcc)

  As if synchronized via sleep:
    #0 nanosleep <null> (libtsan.so.0+0x4dd60)
    #1 boost::this_thread::no_interruption_point::hidden::sleep_until(timespec const&) <null> (libboost_thread.so.1.65.1+0x10dcd)
    #2 void boost::this_thread::sleep<boost::date_time::subsecond_duration<boost::posix_time::time_duration, 1000l> >(boost::date_time::subsecond_duration<boost::posix_time::time_duration, 1000l> const&) /usr/include/boost/thread/pthread/thread_data.hpp:293 (test_roscpp-test_transport_tcp+0x3fb59)
    #3 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:273 (test_roscpp-test_transport_tcp+0x3c006)
    #4 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #5 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #6 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #7 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #8 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #9 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #10 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #11 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #12 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #13 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #14 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Location is heap block of size 640 at 0x7b540000ff00 allocated by thread T11:
    #0 operator new(unsigned long) <null> (libtsan.so.0+0x73f0a)
    #1 boost::detail::sp_if_not_array<ros::TransportTCP>::type boost::make_shared<ros::TransportTCP, ros::PollSet*&, int&>(ros::PollSet*&, int&) <null> (libroscpp.so+0x119f6a)
    #2 boost::_mfi::mf0<void, Polled>::operator()(Polled*) const /usr/include/boost/bind/mem_fn_template.hpp:49 (test_roscpp-test_transport_tcp+0x50497)
    #3 void boost::_bi::list1<boost::_bi::value<Polled*> >::operator()<boost::_mfi::mf0<void, Polled>, boost::_bi::list0>(boost::_bi::type<void>, boost::_mfi::mf0<void, Polled>&, boost::_bi::list0&, int) /usr/include/boost/bind/bind.hpp:259 (test_roscpp-test_transport_tcp+0x501d3)
    #4 boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > >::operator()() /usr/include/boost/bind/bind.hpp:1294 (test_roscpp-test_transport_tcp+0x4fb41)
    #5 boost::detail::thread_data<boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > > >::run() /usr/include/boost/thread/detail/thread.hpp:116 (test_roscpp-test_transport_tcp+0x4eb5c)
    #6 <null> <null> (libboost_thread.so.1.65.1+0x11bcc)

  Mutex M709 (0x7b54000000c0) created at:
    #0 pthread_mutex_init <null> (libtsan.so.0+0x2c5bd)
    #1 ros::TransportTCP::TransportTCP(ros::PollSet*, int) <null> (libroscpp.so+0x112d4f)
    #2 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:254 (test_roscpp-test_transport_tcp+0x3bc5a)
    #3 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #4 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #5 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #6 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #7 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #8 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #9 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #10 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #11 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #12 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #13 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Thread T11 (tid=27207, running) created by main thread at:
    #0 pthread_create <null> (libtsan.so.0+0x2bcfe)
    #1 boost::thread::start_thread_noexcept() <null> (libboost_thread.so.1.65.1+0x10b09)
    #2 boost::thread::thread<boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > > >(boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > >&&) /usr/include/boost/thread/detail/thread.hpp:273 (test_roscpp-test_transport_tcp+0x40207)
    #3 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:268 (test_roscpp-test_transport_tcp+0x3bf80)
    #4 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #5 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #6 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #7 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #8 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #9 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #10 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #11 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #12 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #13 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #14 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

SUMMARY: ThreadSanitizer: data race /usr/include/boost/function/function_base.hpp:352 in boost::detail::function::functor_manager<boost::_bi::bind_t<void, boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>, boost::_bi::list3<boost::_bi::value<Polled*>, boost::arg<1>, boost::_bi::value<int> > > >::manager(boost::detail::function::function_buffer const&, boost::detail::function::function_buffer&, boost::detail::function::functor_manager_operation_type, mpl_::bool_<false>)
==================
==================
WARNING: ThreadSanitizer: data race (pid=16080)
  Read of size 8 at 0x7b540000ff38 by main thread:
    #0 boost::function_base::empty() const /usr/include/boost/function/function_base.hpp:601 (test_roscpp-test_transport_tcp+0x377d0)
    #1 boost::function1<void, boost::shared_ptr<ros::Transport> const&>::move_assign(boost::function1<void, boost::shared_ptr<ros::Transport> const&>&) /usr/include/boost/function/function_template.hpp:983 (test_roscpp-test_transport_tcp+0x45a56)
    #2 boost::function1<void, boost::shared_ptr<ros::Transport> const&>::swap(boost::function1<void, boost::shared_ptr<ros::Transport> const&>&) /usr/include/boost/function/function_template.hpp:859 (test_roscpp-test_transport_tcp+0x423f2)
    #3 boost::function<void (boost::shared_ptr<ros::Transport> const&)>::operator=(boost::function<void (boost::shared_ptr<ros::Transport> const&)> const&) /usr/include/boost/function/function_template.hpp:1092 (test_roscpp-test_transport_tcp+0x3e11f)
    #4 ros::Transport::setDisconnectCallback(boost::function<void (boost::shared_ptr<ros::Transport> const&)> const&) /opt/ros/melodic/include/ros/transport/transport.h:109 (test_roscpp-test_transport_tcp+0x39771)
    #5 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:286 (test_roscpp-test_transport_tcp+0x3c504)
    #6 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #7 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #8 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #9 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #10 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #11 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #12 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #13 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #14 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #15 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #16 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Previous write of size 8 at 0x7b540000ff38 by thread T11 (mutexes: write M709):
    #0 operator new(unsigned long) <null> (libtsan.so.0+0x73f0a)
    #1 boost::detail::sp_if_not_array<ros::TransportTCP>::type boost::make_shared<ros::TransportTCP, ros::PollSet*&, int&>(ros::PollSet*&, int&) <null> (libroscpp.so+0x119f6a)
    #2 boost::_mfi::mf0<void, Polled>::operator()(Polled*) const /usr/include/boost/bind/mem_fn_template.hpp:49 (test_roscpp-test_transport_tcp+0x50497)
    #3 void boost::_bi::list1<boost::_bi::value<Polled*> >::operator()<boost::_mfi::mf0<void, Polled>, boost::_bi::list0>(boost::_bi::type<void>, boost::_mfi::mf0<void, Polled>&, boost::_bi::list0&, int) /usr/include/boost/bind/bind.hpp:259 (test_roscpp-test_transport_tcp+0x501d3)
    #4 boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > >::operator()() /usr/include/boost/bind/bind.hpp:1294 (test_roscpp-test_transport_tcp+0x4fb41)
    #5 boost::detail::thread_data<boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > > >::run() /usr/include/boost/thread/detail/thread.hpp:116 (test_roscpp-test_transport_tcp+0x4eb5c)
    #6 <null> <null> (libboost_thread.so.1.65.1+0x11bcc)

  As if synchronized via sleep:
    #0 nanosleep <null> (libtsan.so.0+0x4dd60)
    #1 boost::this_thread::no_interruption_point::hidden::sleep_until(timespec const&) <null> (libboost_thread.so.1.65.1+0x10dcd)
    #2 void boost::this_thread::sleep<boost::date_time::subsecond_duration<boost::posix_time::time_duration, 1000l> >(boost::date_time::subsecond_duration<boost::posix_time::time_duration, 1000l> const&) /usr/include/boost/thread/pthread/thread_data.hpp:293 (test_roscpp-test_transport_tcp+0x3fb59)
    #3 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:273 (test_roscpp-test_transport_tcp+0x3c006)
    #4 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #5 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #6 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #7 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #8 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #9 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #10 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #11 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #12 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #13 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #14 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Location is heap block of size 640 at 0x7b540000ff00 allocated by thread T11:
    #0 operator new(unsigned long) <null> (libtsan.so.0+0x73f0a)
    #1 boost::detail::sp_if_not_array<ros::TransportTCP>::type boost::make_shared<ros::TransportTCP, ros::PollSet*&, int&>(ros::PollSet*&, int&) <null> (libroscpp.so+0x119f6a)
    #2 boost::_mfi::mf0<void, Polled>::operator()(Polled*) const /usr/include/boost/bind/mem_fn_template.hpp:49 (test_roscpp-test_transport_tcp+0x50497)
    #3 void boost::_bi::list1<boost::_bi::value<Polled*> >::operator()<boost::_mfi::mf0<void, Polled>, boost::_bi::list0>(boost::_bi::type<void>, boost::_mfi::mf0<void, Polled>&, boost::_bi::list0&, int) /usr/include/boost/bind/bind.hpp:259 (test_roscpp-test_transport_tcp+0x501d3)
    #4 boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > >::operator()() /usr/include/boost/bind/bind.hpp:1294 (test_roscpp-test_transport_tcp+0x4fb41)
    #5 boost::detail::thread_data<boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > > >::run() /usr/include/boost/thread/detail/thread.hpp:116 (test_roscpp-test_transport_tcp+0x4eb5c)
    #6 <null> <null> (libboost_thread.so.1.65.1+0x11bcc)

  Mutex M709 (0x7b54000000c0) created at:
    #0 pthread_mutex_init <null> (libtsan.so.0+0x2c5bd)
    #1 ros::TransportTCP::TransportTCP(ros::PollSet*, int) <null> (libroscpp.so+0x112d4f)
    #2 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:254 (test_roscpp-test_transport_tcp+0x3bc5a)
    #3 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #4 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #5 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #6 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #7 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #8 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #9 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #10 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #11 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #12 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #13 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Thread T11 (tid=27207, running) created by main thread at:
    #0 pthread_create <null> (libtsan.so.0+0x2bcfe)
    #1 boost::thread::start_thread_noexcept() <null> (libboost_thread.so.1.65.1+0x10b09)
    #2 boost::thread::thread<boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > > >(boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > >&&) /usr/include/boost/thread/detail/thread.hpp:273 (test_roscpp-test_transport_tcp+0x40207)
    #3 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:268 (test_roscpp-test_transport_tcp+0x3bf80)
    #4 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #5 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #6 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #7 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #8 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #9 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #10 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #11 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #12 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #13 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #14 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

SUMMARY: ThreadSanitizer: data race /usr/include/boost/function/function_base.hpp:601 in boost::function_base::empty() const
==================
==================
WARNING: ThreadSanitizer: data race (pid=16080)
  Write of size 8 at 0x7b540000ff40 by main thread:
    #0 boost::detail::function::functor_manager<boost::_bi::bind_t<void, boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>, boost::_bi::list3<boost::_bi::value<Polled*>, boost::arg<1>, boost::_bi::value<int> > > >::manager(boost::detail::function::function_buffer const&, boost::detail::function::function_buffer&, boost::detail::function::functor_manager_operation_type, mpl_::bool_<false>) /usr/include/boost/function/function_base.hpp:352 (test_roscpp-test_transport_tcp+0x4bfb7)
    #1 boost::detail::function::functor_manager<boost::_bi::bind_t<void, boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>, boost::_bi::list3<boost::_bi::value<Polled*>, boost::arg<1>, boost::_bi::value<int> > > >::manager(boost::detail::function::function_buffer const&, boost::detail::function::function_buffer&, boost::detail::function::functor_manager_operation_type, boost::detail::function::function_obj_tag) /usr/include/boost/function/function_base.hpp:379 (test_roscpp-test_transport_tcp+0x4ab2f)
    #2 boost::detail::function::functor_manager<boost::_bi::bind_t<void, boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>, boost::_bi::list3<boost::_bi::value<Polled*>, boost::arg<1>, boost::_bi::value<int> > > >::manage(boost::detail::function::function_buffer const&, boost::detail::function::function_buffer&, boost::detail::function::functor_manager_operation_type) /usr/include/boost/function/function_base.hpp:407 (test_roscpp-test_transport_tcp+0x4952e)
    #3 boost::function1<void, boost::shared_ptr<ros::Transport> const&>::move_assign(boost::function1<void, boost::shared_ptr<ros::Transport> const&>&) /usr/include/boost/function/function_template.hpp:988 (test_roscpp-test_transport_tcp+0x45b1a)
    #4 boost::function1<void, boost::shared_ptr<ros::Transport> const&>::swap(boost::function1<void, boost::shared_ptr<ros::Transport> const&>&) /usr/include/boost/function/function_template.hpp:860 (test_roscpp-test_transport_tcp+0x42405)
    #5 boost::function<void (boost::shared_ptr<ros::Transport> const&)>::operator=(boost::function<void (boost::shared_ptr<ros::Transport> const&)> const&) /usr/include/boost/function/function_template.hpp:1092 (test_roscpp-test_transport_tcp+0x3e11f)
    #6 ros::Transport::setDisconnectCallback(boost::function<void (boost::shared_ptr<ros::Transport> const&)> const&) /opt/ros/melodic/include/ros/transport/transport.h:109 (test_roscpp-test_transport_tcp+0x39771)
    #7 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:286 (test_roscpp-test_transport_tcp+0x3c504)
    #8 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #9 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #10 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #11 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #12 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #13 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #14 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #15 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #16 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #17 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #18 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Previous write of size 8 at 0x7b540000ff40 by thread T11 (mutexes: write M709):
    #0 operator new(unsigned long) <null> (libtsan.so.0+0x73f0a)
    #1 boost::detail::sp_if_not_array<ros::TransportTCP>::type boost::make_shared<ros::TransportTCP, ros::PollSet*&, int&>(ros::PollSet*&, int&) <null> (libroscpp.so+0x119f6a)
    #2 boost::_mfi::mf0<void, Polled>::operator()(Polled*) const /usr/include/boost/bind/mem_fn_template.hpp:49 (test_roscpp-test_transport_tcp+0x50497)
    #3 void boost::_bi::list1<boost::_bi::value<Polled*> >::operator()<boost::_mfi::mf0<void, Polled>, boost::_bi::list0>(boost::_bi::type<void>, boost::_mfi::mf0<void, Polled>&, boost::_bi::list0&, int) /usr/include/boost/bind/bind.hpp:259 (test_roscpp-test_transport_tcp+0x501d3)
    #4 boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > >::operator()() /usr/include/boost/bind/bind.hpp:1294 (test_roscpp-test_transport_tcp+0x4fb41)
    #5 boost::detail::thread_data<boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > > >::run() /usr/include/boost/thread/detail/thread.hpp:116 (test_roscpp-test_transport_tcp+0x4eb5c)
    #6 <null> <null> (libboost_thread.so.1.65.1+0x11bcc)

  As if synchronized via sleep:
    #0 nanosleep <null> (libtsan.so.0+0x4dd60)
    #1 boost::this_thread::no_interruption_point::hidden::sleep_until(timespec const&) <null> (libboost_thread.so.1.65.1+0x10dcd)
    #2 void boost::this_thread::sleep<boost::date_time::subsecond_duration<boost::posix_time::time_duration, 1000l> >(boost::date_time::subsecond_duration<boost::posix_time::time_duration, 1000l> const&) /usr/include/boost/thread/pthread/thread_data.hpp:293 (test_roscpp-test_transport_tcp+0x3fb59)
    #3 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:273 (test_roscpp-test_transport_tcp+0x3c006)
    #4 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #5 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #6 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #7 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #8 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #9 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #10 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #11 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #12 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #13 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #14 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Location is heap block of size 640 at 0x7b540000ff00 allocated by thread T11:
    #0 operator new(unsigned long) <null> (libtsan.so.0+0x73f0a)
    #1 boost::detail::sp_if_not_array<ros::TransportTCP>::type boost::make_shared<ros::TransportTCP, ros::PollSet*&, int&>(ros::PollSet*&, int&) <null> (libroscpp.so+0x119f6a)
    #2 boost::_mfi::mf0<void, Polled>::operator()(Polled*) const /usr/include/boost/bind/mem_fn_template.hpp:49 (test_roscpp-test_transport_tcp+0x50497)
    #3 void boost::_bi::list1<boost::_bi::value<Polled*> >::operator()<boost::_mfi::mf0<void, Polled>, boost::_bi::list0>(boost::_bi::type<void>, boost::_mfi::mf0<void, Polled>&, boost::_bi::list0&, int) /usr/include/boost/bind/bind.hpp:259 (test_roscpp-test_transport_tcp+0x501d3)
    #4 boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > >::operator()() /usr/include/boost/bind/bind.hpp:1294 (test_roscpp-test_transport_tcp+0x4fb41)
    #5 boost::detail::thread_data<boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > > >::run() /usr/include/boost/thread/detail/thread.hpp:116 (test_roscpp-test_transport_tcp+0x4eb5c)
    #6 <null> <null> (libboost_thread.so.1.65.1+0x11bcc)

  Mutex M709 (0x7b54000000c0) created at:
    #0 pthread_mutex_init <null> (libtsan.so.0+0x2c5bd)
    #1 ros::TransportTCP::TransportTCP(ros::PollSet*, int) <null> (libroscpp.so+0x112d4f)
    #2 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:254 (test_roscpp-test_transport_tcp+0x3bc5a)
    #3 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #4 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #5 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #6 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #7 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #8 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #9 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #10 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #11 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #12 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #13 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Thread T11 (tid=27207, running) created by main thread at:
    #0 pthread_create <null> (libtsan.so.0+0x2bcfe)
    #1 boost::thread::start_thread_noexcept() <null> (libboost_thread.so.1.65.1+0x10b09)
    #2 boost::thread::thread<boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > > >(boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > >&&) /usr/include/boost/thread/detail/thread.hpp:273 (test_roscpp-test_transport_tcp+0x40207)
    #3 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:268 (test_roscpp-test_transport_tcp+0x3bf80)
    #4 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #5 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #6 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #7 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #8 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #9 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #10 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #11 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #12 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #13 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #14 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

SUMMARY: ThreadSanitizer: data race /usr/include/boost/function/function_base.hpp:352 in boost::detail::function::functor_manager<boost::_bi::bind_t<void, boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>, boost::_bi::list3<boost::_bi::value<Polled*>, boost::arg<1>, boost::_bi::value<int> > > >::manager(boost::detail::function::function_buffer const&, boost::detail::function::function_buffer&, boost::detail::function::functor_manager_operation_type, mpl_::bool_<false>)
==================
==================
WARNING: ThreadSanitizer: data race (pid=16080)
  Read of size 4 at 0x7b4800000048 by main thread:
    #0 testing::AssertionResult testing::internal::CmpHelperGT<int, int>(char const*, char const*, int const&, int const&) /usr/src/googletest/googletest/include/gtest/gtest.h:1530 (test_roscpp-test_transport_tcp+0x403e9)
    #1 Polled_readAndWrite_Test::TestBody() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:321 (test_roscpp-test_transport_tcp+0x32ea8)
    #2 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #3 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #4 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2474 (libgtest.so+0x6c3dd)
    #5 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #6 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #7 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #8 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #9 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #10 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #11 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #12 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Previous write of size 4 at 0x7b4800000048 by thread T11 (mutexes: write M719):
    #0 Polled::onReadable(boost::shared_ptr<ros::Transport> const&, int) /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:219 (test_roscpp-test_transport_tcp+0x3b671)
    #1 boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>::operator()(Polled*, boost::shared_ptr<ros::Transport> const&, int) const /usr/include/boost/bind/mem_fn_template.hpp:280 (test_roscpp-test_transport_tcp+0x4cb76)
    #2 void boost::_bi::list3<boost::_bi::value<Polled*>, boost::arg<1>, boost::_bi::value<int> >::operator()<boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>, boost::_bi::rrlist1<boost::shared_ptr<ros::Transport> const&> >(boost::_bi::type<void>, boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>&, boost::_bi::rrlist1<boost::shared_ptr<ros::Transport> const&>&, int) /usr/include/boost/bind/bind.hpp:398 (test_roscpp-test_transport_tcp+0x4c212)
    #3 void boost::_bi::bind_t<void, boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>, boost::_bi::list3<boost::_bi::value<Polled*>, boost::arg<1>, boost::_bi::value<int> > >::operator()<boost::shared_ptr<ros::Transport> const&>(boost::shared_ptr<ros::Transport> const&) /usr/include/boost/bind/bind.hpp:1306 (test_roscpp-test_transport_tcp+0x4abca)
    #4 boost::detail::function::void_function_obj_invoker1<boost::_bi::bind_t<void, boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>, boost::_bi::list3<boost::_bi::value<Polled*>, boost::arg<1>, boost::_bi::value<int> > >, void, boost::shared_ptr<ros::Transport> const&>::invoke(boost::detail::function::function_buffer&, boost::shared_ptr<ros::Transport> const&) /usr/include/boost/function/function_template.hpp:159 (test_roscpp-test_transport_tcp+0x495b6)
    #5 ros::TransportTCP::socketUpdate(int) <null> (libroscpp.so+0x1194bc)
    #6 boost::_mfi::mf0<void, Polled>::operator()(Polled*) const /usr/include/boost/bind/mem_fn_template.hpp:49 (test_roscpp-test_transport_tcp+0x50497)
    #7 void boost::_bi::list1<boost::_bi::value<Polled*> >::operator()<boost::_mfi::mf0<void, Polled>, boost::_bi::list0>(boost::_bi::type<void>, boost::_mfi::mf0<void, Polled>&, boost::_bi::list0&, int) /usr/include/boost/bind/bind.hpp:259 (test_roscpp-test_transport_tcp+0x501d3)
    #8 boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > >::operator()() /usr/include/boost/bind/bind.hpp:1294 (test_roscpp-test_transport_tcp+0x4fb41)
    #9 boost::detail::thread_data<boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > > >::run() /usr/include/boost/thread/detail/thread.hpp:116 (test_roscpp-test_transport_tcp+0x4eb5c)
    #10 <null> <null> (libboost_thread.so.1.65.1+0x11bcc)

  As if synchronized via sleep:
    #0 nanosleep <null> (libtsan.so.0+0x4dd60)
    #1 boost::this_thread::no_interruption_point::hidden::sleep_until(timespec const&) <null> (libboost_thread.so.1.65.1+0x10dcd)
    #2 void boost::this_thread::sleep<boost::date_time::subsecond_duration<boost::posix_time::time_duration, 1000l> >(boost::date_time::subsecond_duration<boost::posix_time::time_duration, 1000l> const&) /usr/include/boost/thread/pthread/thread_data.hpp:293 (test_roscpp-test_transport_tcp+0x3fb59)
    #3 Polled_readAndWrite_Test::TestBody() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:320 (test_roscpp-test_transport_tcp+0x32e69)
    #4 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #5 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #6 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2474 (libgtest.so+0x6c3dd)
    #7 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #8 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #9 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #10 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #11 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #12 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #13 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #14 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Location is heap block of size 360 at 0x7b4800000000 allocated by main thread:
    #0 operator new(unsigned long) <null> (libtsan.so.0+0x73f0a)
    #1 testing::internal::TestFactoryImpl<Polled_readAndWrite_Test>::CreateTest() /usr/src/googletest/googletest/include/gtest/internal/gtest-internal.h:484 (test_roscpp-test_transport_tcp+0x4f684)
    #2 testing::Test* testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::TestFactoryBase, testing::Test*>(testing::internal::TestFactoryBase*, testing::Test* (testing::internal::TestFactoryBase::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9b045)
    #3 testing::Test* testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::TestFactoryBase, testing::Test*>(testing::internal::TestFactoryBase*, testing::Test* (testing::internal::TestFactoryBase::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x920ff)
    #4 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2649 (libgtest.so+0x6cf84)
    #5 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #6 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #7 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #8 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #9 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #10 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #11 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Mutex M719 (0x7b540000ffc0) created at:
    #0 pthread_mutex_init <null> (libtsan.so.0+0x2c5bd)
    #1 ros::TransportTCP::TransportTCP(ros::PollSet*, int) <null> (libroscpp.so+0x112d4f)
    #2 boost::_mfi::mf0<void, Polled>::operator()(Polled*) const /usr/include/boost/bind/mem_fn_template.hpp:49 (test_roscpp-test_transport_tcp+0x50497)
    #3 void boost::_bi::list1<boost::_bi::value<Polled*> >::operator()<boost::_mfi::mf0<void, Polled>, boost::_bi::list0>(boost::_bi::type<void>, boost::_mfi::mf0<void, Polled>&, boost::_bi::list0&, int) /usr/include/boost/bind/bind.hpp:259 (test_roscpp-test_transport_tcp+0x501d3)
    #4 boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > >::operator()() /usr/include/boost/bind/bind.hpp:1294 (test_roscpp-test_transport_tcp+0x4fb41)
    #5 boost::detail::thread_data<boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > > >::run() /usr/include/boost/thread/detail/thread.hpp:116 (test_roscpp-test_transport_tcp+0x4eb5c)
    #6 <null> <null> (libboost_thread.so.1.65.1+0x11bcc)

  Thread T11 (tid=27207, running) created by main thread at:
    #0 pthread_create <null> (libtsan.so.0+0x2bcfe)
    #1 boost::thread::start_thread_noexcept() <null> (libboost_thread.so.1.65.1+0x10b09)
    #2 boost::thread::thread<boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > > >(boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > >&&) /usr/include/boost/thread/detail/thread.hpp:273 (test_roscpp-test_transport_tcp+0x40207)
    #3 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:268 (test_roscpp-test_transport_tcp+0x3bf80)
    #4 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #5 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #6 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #7 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #8 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #9 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #10 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #11 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #12 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #13 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #14 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

SUMMARY: ThreadSanitizer: data race /usr/src/googletest/googletest/include/gtest/gtest.h:1530 in testing::AssertionResult testing::internal::CmpHelperGT<int, int>(char const*, char const*, int const&, int const&)
==================
==================
WARNING: ThreadSanitizer: data race (pid=16080)
  Read of size 4 at 0x7b4800000050 by main thread:
    #0 testing::AssertionResult testing::internal::CmpHelperEQ<int, int>(char const*, char const*, int const&, int const&) /usr/src/googletest/googletest/include/gtest/gtest.h:1392 (test_roscpp-test_transport_tcp+0x4344f)
    #1 testing::AssertionResult testing::internal::EqHelper<false>::Compare<int, int>(char const*, char const*, int const&, int const&) /usr/src/googletest/googletest/include/gtest/gtest.h:1421 (test_roscpp-test_transport_tcp+0x3f395)
    #2 Polled_readAndWrite_Test::TestBody() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:322 (test_roscpp-test_transport_tcp+0x32f70)
    #3 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #4 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #5 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2474 (libgtest.so+0x6c3dd)
    #6 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #7 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #8 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #9 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #10 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #11 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #12 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #13 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Previous write of size 4 at 0x7b4800000050 by thread T11 (mutexes: write M711):
    #0 Polled::onWriteable(boost::shared_ptr<ros::Transport> const&, int) /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:230 (test_roscpp-test_transport_tcp+0x3b8af)
    #1 boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>::operator()(Polled*, boost::shared_ptr<ros::Transport> const&, int) const /usr/include/boost/bind/mem_fn_template.hpp:280 (test_roscpp-test_transport_tcp+0x4cb76)
    #2 void boost::_bi::list3<boost::_bi::value<Polled*>, boost::arg<1>, boost::_bi::value<int> >::operator()<boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>, boost::_bi::rrlist1<boost::shared_ptr<ros::Transport> const&> >(boost::_bi::type<void>, boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>&, boost::_bi::rrlist1<boost::shared_ptr<ros::Transport> const&>&, int) /usr/include/boost/bind/bind.hpp:398 (test_roscpp-test_transport_tcp+0x4c212)
    #3 void boost::_bi::bind_t<void, boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>, boost::_bi::list3<boost::_bi::value<Polled*>, boost::arg<1>, boost::_bi::value<int> > >::operator()<boost::shared_ptr<ros::Transport> const&>(boost::shared_ptr<ros::Transport> const&) /usr/include/boost/bind/bind.hpp:1306 (test_roscpp-test_transport_tcp+0x4abca)
    #4 boost::detail::function::void_function_obj_invoker1<boost::_bi::bind_t<void, boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>, boost::_bi::list3<boost::_bi::value<Polled*>, boost::arg<1>, boost::_bi::value<int> > >, void, boost::shared_ptr<ros::Transport> const&>::invoke(boost::detail::function::function_buffer&, boost::shared_ptr<ros::Transport> const&) /usr/include/boost/function/function_template.hpp:159 (test_roscpp-test_transport_tcp+0x495b6)
    #5 ros::TransportTCP::socketUpdate(int) <null> (libroscpp.so+0x119399)
    #6 boost::_mfi::mf0<void, Polled>::operator()(Polled*) const /usr/include/boost/bind/mem_fn_template.hpp:49 (test_roscpp-test_transport_tcp+0x50497)
    #7 void boost::_bi::list1<boost::_bi::value<Polled*> >::operator()<boost::_mfi::mf0<void, Polled>, boost::_bi::list0>(boost::_bi::type<void>, boost::_mfi::mf0<void, Polled>&, boost::_bi::list0&, int) /usr/include/boost/bind/bind.hpp:259 (test_roscpp-test_transport_tcp+0x501d3)
    #8 boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > >::operator()() /usr/include/boost/bind/bind.hpp:1294 (test_roscpp-test_transport_tcp+0x4fb41)
    #9 boost::detail::thread_data<boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > > >::run() /usr/include/boost/thread/detail/thread.hpp:116 (test_roscpp-test_transport_tcp+0x4eb5c)
    #10 <null> <null> (libboost_thread.so.1.65.1+0x11bcc)

  As if synchronized via sleep:
    #0 nanosleep <null> (libtsan.so.0+0x4dd60)
    #1 boost::this_thread::no_interruption_point::hidden::sleep_until(timespec const&) <null> (libboost_thread.so.1.65.1+0x10dcd)
    #2 void boost::this_thread::sleep<boost::date_time::subsecond_duration<boost::posix_time::time_duration, 1000l> >(boost::date_time::subsecond_duration<boost::posix_time::time_duration, 1000l> const&) /usr/include/boost/thread/pthread/thread_data.hpp:293 (test_roscpp-test_transport_tcp+0x3fb59)
    #3 Polled_readAndWrite_Test::TestBody() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:320 (test_roscpp-test_transport_tcp+0x32e69)
    #4 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #5 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #6 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2474 (libgtest.so+0x6c3dd)
    #7 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #8 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #9 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #10 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #11 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #12 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #13 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #14 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Location is heap block of size 360 at 0x7b4800000000 allocated by main thread:
    #0 operator new(unsigned long) <null> (libtsan.so.0+0x73f0a)
    #1 testing::internal::TestFactoryImpl<Polled_readAndWrite_Test>::CreateTest() /usr/src/googletest/googletest/include/gtest/internal/gtest-internal.h:484 (test_roscpp-test_transport_tcp+0x4f684)
    #2 testing::Test* testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::TestFactoryBase, testing::Test*>(testing::internal::TestFactoryBase*, testing::Test* (testing::internal::TestFactoryBase::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9b045)
    #3 testing::Test* testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::TestFactoryBase, testing::Test*>(testing::internal::TestFactoryBase*, testing::Test* (testing::internal::TestFactoryBase::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x920ff)
    #4 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2649 (libgtest.so+0x6cf84)
    #5 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #6 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #7 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #8 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #9 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #10 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #11 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Mutex M711 (0x7b5400000340) created at:
    #0 pthread_mutex_init <null> (libtsan.so.0+0x2c5bd)
    #1 ros::TransportTCP::TransportTCP(ros::PollSet*, int) <null> (libroscpp.so+0x112d4f)
    #2 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:255 (test_roscpp-test_transport_tcp+0x3bcb7)
    #3 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #4 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #5 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #6 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #7 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #8 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #9 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #10 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #11 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #12 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #13 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Thread T11 (tid=27207, running) created by main thread at:
    #0 pthread_create <null> (libtsan.so.0+0x2bcfe)
    #1 boost::thread::start_thread_noexcept() <null> (libboost_thread.so.1.65.1+0x10b09)
    #2 boost::thread::thread<boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > > >(boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > >&&) /usr/include/boost/thread/detail/thread.hpp:273 (test_roscpp-test_transport_tcp+0x40207)
    #3 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:268 (test_roscpp-test_transport_tcp+0x3bf80)
    #4 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #5 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #6 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #7 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #8 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #9 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #10 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #11 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #12 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #13 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #14 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

SUMMARY: ThreadSanitizer: data race /usr/src/googletest/googletest/include/gtest/gtest.h:1392 in testing::AssertionResult testing::internal::CmpHelperEQ<int, int>(char const*, char const*, int const&, int const&)
==================
==================
WARNING: ThreadSanitizer: data race (pid=16080)
  Read of size 4 at 0x7b4800000044 by main thread:
    #0 testing::AssertionResult testing::internal::CmpHelperGT<int, int>(char const*, char const*, int const&, int const&) /usr/src/googletest/googletest/include/gtest/gtest.h:1530 (test_roscpp-test_transport_tcp+0x403e9)
    #1 Polled_readAndWrite_Test::TestBody() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:343 (test_roscpp-test_transport_tcp+0x33550)
    #2 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #3 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #4 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2474 (libgtest.so+0x6c3dd)
    #5 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #6 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #7 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #8 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #9 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #10 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #11 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #12 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Previous write of size 4 at 0x7b4800000044 by thread T11 (mutexes: write M711):
    #0 Polled::onReadable(boost::shared_ptr<ros::Transport> const&, int) /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:219 (test_roscpp-test_transport_tcp+0x3b671)
    #1 boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>::operator()(Polled*, boost::shared_ptr<ros::Transport> const&, int) const /usr/include/boost/bind/mem_fn_template.hpp:280 (test_roscpp-test_transport_tcp+0x4cb76)
    #2 void boost::_bi::list3<boost::_bi::value<Polled*>, boost::arg<1>, boost::_bi::value<int> >::operator()<boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>, boost::_bi::rrlist1<boost::shared_ptr<ros::Transport> const&> >(boost::_bi::type<void>, boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>&, boost::_bi::rrlist1<boost::shared_ptr<ros::Transport> const&>&, int) /usr/include/boost/bind/bind.hpp:398 (test_roscpp-test_transport_tcp+0x4c212)
    #3 void boost::_bi::bind_t<void, boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>, boost::_bi::list3<boost::_bi::value<Polled*>, boost::arg<1>, boost::_bi::value<int> > >::operator()<boost::shared_ptr<ros::Transport> const&>(boost::shared_ptr<ros::Transport> const&) /usr/include/boost/bind/bind.hpp:1306 (test_roscpp-test_transport_tcp+0x4abca)
    #4 boost::detail::function::void_function_obj_invoker1<boost::_bi::bind_t<void, boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>, boost::_bi::list3<boost::_bi::value<Polled*>, boost::arg<1>, boost::_bi::value<int> > >, void, boost::shared_ptr<ros::Transport> const&>::invoke(boost::detail::function::function_buffer&, boost::shared_ptr<ros::Transport> const&) /usr/include/boost/function/function_template.hpp:159 (test_roscpp-test_transport_tcp+0x495b6)
    #5 ros::TransportTCP::socketUpdate(int) <null> (libroscpp.so+0x1194bc)
    #6 boost::_mfi::mf0<void, Polled>::operator()(Polled*) const /usr/include/boost/bind/mem_fn_template.hpp:49 (test_roscpp-test_transport_tcp+0x50497)
    #7 void boost::_bi::list1<boost::_bi::value<Polled*> >::operator()<boost::_mfi::mf0<void, Polled>, boost::_bi::list0>(boost::_bi::type<void>, boost::_mfi::mf0<void, Polled>&, boost::_bi::list0&, int) /usr/include/boost/bind/bind.hpp:259 (test_roscpp-test_transport_tcp+0x501d3)
    #8 boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > >::operator()() /usr/include/boost/bind/bind.hpp:1294 (test_roscpp-test_transport_tcp+0x4fb41)
    #9 boost::detail::thread_data<boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > > >::run() /usr/include/boost/thread/detail/thread.hpp:116 (test_roscpp-test_transport_tcp+0x4eb5c)
    #10 <null> <null> (libboost_thread.so.1.65.1+0x11bcc)

  As if synchronized via sleep:
    #0 nanosleep <null> (libtsan.so.0+0x4dd60)
    #1 boost::this_thread::no_interruption_point::hidden::sleep_until(timespec const&) <null> (libboost_thread.so.1.65.1+0x10dcd)
    #2 void boost::this_thread::sleep<boost::date_time::subsecond_duration<boost::posix_time::time_duration, 1000l> >(boost::date_time::subsecond_duration<boost::posix_time::time_duration, 1000l> const&) /usr/include/boost/thread/pthread/thread_data.hpp:293 (test_roscpp-test_transport_tcp+0x3fb59)
    #3 Polled_readAndWrite_Test::TestBody() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:340 (test_roscpp-test_transport_tcp+0x33372)
    #4 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #5 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #6 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2474 (libgtest.so+0x6c3dd)
    #7 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #8 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #9 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #10 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #11 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #12 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #13 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #14 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Location is heap block of size 360 at 0x7b4800000000 allocated by main thread:
    #0 operator new(unsigned long) <null> (libtsan.so.0+0x73f0a)
    #1 testing::internal::TestFactoryImpl<Polled_readAndWrite_Test>::CreateTest() /usr/src/googletest/googletest/include/gtest/internal/gtest-internal.h:484 (test_roscpp-test_transport_tcp+0x4f684)
    #2 testing::Test* testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::TestFactoryBase, testing::Test*>(testing::internal::TestFactoryBase*, testing::Test* (testing::internal::TestFactoryBase::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9b045)
    #3 testing::Test* testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::TestFactoryBase, testing::Test*>(testing::internal::TestFactoryBase*, testing::Test* (testing::internal::TestFactoryBase::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x920ff)
    #4 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2649 (libgtest.so+0x6cf84)
    #5 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #6 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #7 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #8 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #9 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #10 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #11 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Mutex M711 (0x7b5400000340) created at:
    #0 pthread_mutex_init <null> (libtsan.so.0+0x2c5bd)
    #1 ros::TransportTCP::TransportTCP(ros::PollSet*, int) <null> (libroscpp.so+0x112d4f)
    #2 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:255 (test_roscpp-test_transport_tcp+0x3bcb7)
    #3 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #4 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #5 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #6 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #7 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #8 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #9 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #10 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #11 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #12 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #13 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Thread T11 (tid=27207, running) created by main thread at:
    #0 pthread_create <null> (libtsan.so.0+0x2bcfe)
    #1 boost::thread::start_thread_noexcept() <null> (libboost_thread.so.1.65.1+0x10b09)
    #2 boost::thread::thread<boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > > >(boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > >&&) /usr/include/boost/thread/detail/thread.hpp:273 (test_roscpp-test_transport_tcp+0x40207)
    #3 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:268 (test_roscpp-test_transport_tcp+0x3bf80)
    #4 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #5 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #6 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #7 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #8 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #9 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #10 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #11 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #12 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #13 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #14 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

SUMMARY: ThreadSanitizer: data race /usr/src/googletest/googletest/include/gtest/gtest.h:1530 in testing::AssertionResult testing::internal::CmpHelperGT<int, int>(char const*, char const*, int const&, int const&)
==================
==================
WARNING: ThreadSanitizer: data race (pid=16080)
  Write of size 1 at 0x7b4800000160 by main thread:
    #0 Polled::TearDown() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:299 (test_roscpp-test_transport_tcp+0x3c768)
    #1 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #2 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #3 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2482 (libgtest.so+0x6c43c)
    #4 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #5 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #6 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #7 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #8 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #9 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #10 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #11 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Previous read of size 1 at 0x7b4800000160 by thread T11:
    #0 Polled::pollThread() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:206 (test_roscpp-test_transport_tcp+0x3b474)
    #1 boost::_mfi::mf0<void, Polled>::operator()(Polled*) const /usr/include/boost/bind/mem_fn_template.hpp:49 (test_roscpp-test_transport_tcp+0x50497)
    #2 void boost::_bi::list1<boost::_bi::value<Polled*> >::operator()<boost::_mfi::mf0<void, Polled>, boost::_bi::list0>(boost::_bi::type<void>, boost::_mfi::mf0<void, Polled>&, boost::_bi::list0&, int) /usr/include/boost/bind/bind.hpp:259 (test_roscpp-test_transport_tcp+0x501d3)
    #3 boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > >::operator()() /usr/include/boost/bind/bind.hpp:1294 (test_roscpp-test_transport_tcp+0x4fb41)
    #4 boost::detail::thread_data<boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > > >::run() /usr/include/boost/thread/detail/thread.hpp:116 (test_roscpp-test_transport_tcp+0x4eb5c)
    #5 <null> <null> (libboost_thread.so.1.65.1+0x11bcc)

  Location is heap block of size 360 at 0x7b4800000000 allocated by main thread:
    #0 operator new(unsigned long) <null> (libtsan.so.0+0x73f0a)
    #1 testing::internal::TestFactoryImpl<Polled_readAndWrite_Test>::CreateTest() /usr/src/googletest/googletest/include/gtest/internal/gtest-internal.h:484 (test_roscpp-test_transport_tcp+0x4f684)
    #2 testing::Test* testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::TestFactoryBase, testing::Test*>(testing::internal::TestFactoryBase*, testing::Test* (testing::internal::TestFactoryBase::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9b045)
    #3 testing::Test* testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::TestFactoryBase, testing::Test*>(testing::internal::TestFactoryBase*, testing::Test* (testing::internal::TestFactoryBase::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x920ff)
    #4 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2649 (libgtest.so+0x6cf84)
    #5 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #6 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #7 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #8 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #9 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #10 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #11 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Thread T11 (tid=27207, running) created by main thread at:
    #0 pthread_create <null> (libtsan.so.0+0x2bcfe)
    #1 boost::thread::start_thread_noexcept() <null> (libboost_thread.so.1.65.1+0x10b09)
    #2 boost::thread::thread<boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > > >(boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > >&&) /usr/include/boost/thread/detail/thread.hpp:273 (test_roscpp-test_transport_tcp+0x40207)
    #3 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:268 (test_roscpp-test_transport_tcp+0x3bf80)
    #4 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #5 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #6 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #7 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #8 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #9 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #10 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #11 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #12 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #13 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #14 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

SUMMARY: ThreadSanitizer: data race /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:299 in Polled::TearDown()
==================
==================
WARNING: ThreadSanitizer: data race (pid=16080)
  Read of size 1 at 0x7b480000005a by main thread:
    #0 testing::AssertionResult testing::internal::CmpHelperEQ<bool, bool>(char const*, char const*, bool const&, bool const&) /usr/src/googletest/googletest/include/gtest/gtest.h:1392 (test_roscpp-test_transport_tcp+0x4452e)
    #1 testing::AssertionResult testing::internal::EqHelper<false>::Compare<bool, bool>(char const*, char const*, bool const&, bool const&) /usr/src/googletest/googletest/include/gtest/gtest.h:1421 (test_roscpp-test_transport_tcp+0x404c9)
    #2 Polled_disconnectNoTraffic_Test::TestBody() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:379 (test_roscpp-test_transport_tcp+0x345ec)
    #3 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #4 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #5 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2474 (libgtest.so+0x6c3dd)
    #6 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #7 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #8 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #9 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #10 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #11 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #12 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #13 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Previous write of size 1 at 0x7b480000005a by thread T13 (mutexes: write M757):
    #0 Polled::onDisconnect(boost::shared_ptr<ros::Transport> const&, int) /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:237 (test_roscpp-test_transport_tcp+0x3ba55)
    #1 boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>::operator()(Polled*, boost::shared_ptr<ros::Transport> const&, int) const /usr/include/boost/bind/mem_fn_template.hpp:280 (test_roscpp-test_transport_tcp+0x4cb76)
    #2 void boost::_bi::list3<boost::_bi::value<Polled*>, boost::arg<1>, boost::_bi::value<int> >::operator()<boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>, boost::_bi::rrlist1<boost::shared_ptr<ros::Transport> const&> >(boost::_bi::type<void>, boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>&, boost::_bi::rrlist1<boost::shared_ptr<ros::Transport> const&>&, int) /usr/include/boost/bind/bind.hpp:398 (test_roscpp-test_transport_tcp+0x4c212)
    #3 void boost::_bi::bind_t<void, boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>, boost::_bi::list3<boost::_bi::value<Polled*>, boost::arg<1>, boost::_bi::value<int> > >::operator()<boost::shared_ptr<ros::Transport> const&>(boost::shared_ptr<ros::Transport> const&) /usr/include/boost/bind/bind.hpp:1306 (test_roscpp-test_transport_tcp+0x4abca)
    #4 boost::detail::function::void_function_obj_invoker1<boost::_bi::bind_t<void, boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>, boost::_bi::list3<boost::_bi::value<Polled*>, boost::arg<1>, boost::_bi::value<int> > >, void, boost::shared_ptr<ros::Transport> const&>::invoke(boost::detail::function::function_buffer&, boost::shared_ptr<ros::Transport> const&) /usr/include/boost/function/function_template.hpp:159 (test_roscpp-test_transport_tcp+0x495b6)
    #5 ros::TransportTCP::close() <null> (libroscpp.so+0x1186fd)
    #6 boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>::operator()(Polled*, boost::shared_ptr<ros::Transport> const&, int) const /usr/include/boost/bind/mem_fn_template.hpp:280 (test_roscpp-test_transport_tcp+0x4cb76)
    #7 void boost::_bi::list3<boost::_bi::value<Polled*>, boost::arg<1>, boost::_bi::value<int> >::operator()<boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>, boost::_bi::rrlist1<boost::shared_ptr<ros::Transport> const&> >(boost::_bi::type<void>, boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>&, boost::_bi::rrlist1<boost::shared_ptr<ros::Transport> const&>&, int) /usr/include/boost/bind/bind.hpp:398 (test_roscpp-test_transport_tcp+0x4c212)
    #8 void boost::_bi::bind_t<void, boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>, boost::_bi::list3<boost::_bi::value<Polled*>, boost::arg<1>, boost::_bi::value<int> > >::operator()<boost::shared_ptr<ros::Transport> const&>(boost::shared_ptr<ros::Transport> const&) /usr/include/boost/bind/bind.hpp:1306 (test_roscpp-test_transport_tcp+0x4abca)
    #9 boost::detail::function::void_function_obj_invoker1<boost::_bi::bind_t<void, boost::_mfi::mf2<void, Polled, boost::shared_ptr<ros::Transport> const&, int>, boost::_bi::list3<boost::_bi::value<Polled*>, boost::arg<1>, boost::_bi::value<int> > >, void, boost::shared_ptr<ros::Transport> const&>::invoke(boost::detail::function::function_buffer&, boost::shared_ptr<ros::Transport> const&) /usr/include/boost/function/function_template.hpp:159 (test_roscpp-test_transport_tcp+0x495b6)
    #10 ros::TransportTCP::socketUpdate(int) <null> (libroscpp.so+0x1194bc)
    #11 boost::_mfi::mf0<void, Polled>::operator()(Polled*) const /usr/include/boost/bind/mem_fn_template.hpp:49 (test_roscpp-test_transport_tcp+0x50497)
    #12 void boost::_bi::list1<boost::_bi::value<Polled*> >::operator()<boost::_mfi::mf0<void, Polled>, boost::_bi::list0>(boost::_bi::type<void>, boost::_mfi::mf0<void, Polled>&, boost::_bi::list0&, int) /usr/include/boost/bind/bind.hpp:259 (test_roscpp-test_transport_tcp+0x501d3)
    #13 boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > >::operator()() /usr/include/boost/bind/bind.hpp:1294 (test_roscpp-test_transport_tcp+0x4fb41)
    #14 boost::detail::thread_data<boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > > >::run() /usr/include/boost/thread/detail/thread.hpp:116 (test_roscpp-test_transport_tcp+0x4eb5c)
    #15 <null> <null> (libboost_thread.so.1.65.1+0x11bcc)

  As if synchronized via sleep:
    #0 nanosleep <null> (libtsan.so.0+0x4dd60)
    #1 boost::this_thread::no_interruption_point::hidden::sleep_until(timespec const&) <null> (libboost_thread.so.1.65.1+0x10dcd)
    #2 void boost::this_thread::sleep<boost::date_time::subsecond_duration<boost::posix_time::time_duration, 1000l> >(boost::date_time::subsecond_duration<boost::posix_time::time_duration, 1000l> const&) /usr/include/boost/thread/pthread/thread_data.hpp:293 (test_roscpp-test_transport_tcp+0x3fb59)
    #3 Polled_disconnectNoTraffic_Test::TestBody() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:377 (test_roscpp-test_transport_tcp+0x345b0)
    #4 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #5 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #6 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2474 (libgtest.so+0x6c3dd)
    #7 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #8 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #9 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #10 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #11 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #12 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #13 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #14 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Location is heap block of size 360 at 0x7b4800000000 allocated by main thread:
    #0 operator new(unsigned long) <null> (libtsan.so.0+0x73f0a)
    #1 testing::internal::TestFactoryImpl<Polled_disconnectNoTraffic_Test>::CreateTest() /usr/src/googletest/googletest/include/gtest/internal/gtest-internal.h:484 (test_roscpp-test_transport_tcp+0x4f5ac)
    #2 testing::Test* testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::TestFactoryBase, testing::Test*>(testing::internal::TestFactoryBase*, testing::Test* (testing::internal::TestFactoryBase::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9b045)
    #3 testing::Test* testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::TestFactoryBase, testing::Test*>(testing::internal::TestFactoryBase*, testing::Test* (testing::internal::TestFactoryBase::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x920ff)
    #4 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2649 (libgtest.so+0x6cf84)
    #5 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #6 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #7 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #8 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #9 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #10 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #11 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

  Mutex M757 (0x7b5400020140) created at:
    #0 pthread_mutex_init <null> (libtsan.so.0+0x2c5bd)
    #1 ros::TransportTCP::TransportTCP(ros::PollSet*, int) <null> (libroscpp.so+0x112d4f)
    #2 boost::_mfi::mf0<void, Polled>::operator()(Polled*) const /usr/include/boost/bind/mem_fn_template.hpp:49 (test_roscpp-test_transport_tcp+0x50497)
    #3 void boost::_bi::list1<boost::_bi::value<Polled*> >::operator()<boost::_mfi::mf0<void, Polled>, boost::_bi::list0>(boost::_bi::type<void>, boost::_mfi::mf0<void, Polled>&, boost::_bi::list0&, int) /usr/include/boost/bind/bind.hpp:259 (test_roscpp-test_transport_tcp+0x501d3)
    #4 boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > >::operator()() /usr/include/boost/bind/bind.hpp:1294 (test_roscpp-test_transport_tcp+0x4fb41)
    #5 boost::detail::thread_data<boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > > >::run() /usr/include/boost/thread/detail/thread.hpp:116 (test_roscpp-test_transport_tcp+0x4eb5c)
    #6 <null> <null> (libboost_thread.so.1.65.1+0x11bcc)

  Thread T13 (tid=27568, running) created by main thread at:
    #0 pthread_create <null> (libtsan.so.0+0x2bcfe)
    #1 boost::thread::start_thread_noexcept() <null> (libboost_thread.so.1.65.1+0x10b09)
    #2 boost::thread::thread<boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > > >(boost::_bi::bind_t<void, boost::_mfi::mf0<void, Polled>, boost::_bi::list1<boost::_bi::value<Polled*> > >&&) /usr/include/boost/thread/detail/thread.hpp:273 (test_roscpp-test_transport_tcp+0x40207)
    #3 Polled::SetUp() /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:268 (test_roscpp-test_transport_tcp+0x3bf80)
    #4 void testing::internal::HandleSehExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9aef1)
    #5 void testing::internal::HandleExceptionsInMethodIfSupported<testing::Test, void>(testing::Test*, void (testing::Test::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x91daf)
    #6 testing::Test::Run() /usr/src/googletest/googletest/src/gtest.cc:2470 (libgtest.so+0x6c36a)
    #7 testing::TestInfo::Run() /usr/src/googletest/googletest/src/gtest.cc:2656 (libgtest.so+0x6cfb7)
    #8 testing::TestCase::Run() /usr/src/googletest/googletest/src/gtest.cc:2776 (libgtest.so+0x6d952)
    #9 testing::internal::UnitTestImpl::RunAllTests() /usr/src/googletest/googletest/src/gtest.cc:4651 (libgtest.so+0x76655)
    #10 bool testing::internal::HandleSehExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2402 (libgtest.so+0x9c9f6)
    #11 bool testing::internal::HandleExceptionsInMethodIfSupported<testing::internal::UnitTestImpl, bool>(testing::internal::UnitTestImpl*, bool (testing::internal::UnitTestImpl::*)(), char const*) /usr/src/googletest/googletest/src/gtest.cc:2438 (libgtest.so+0x933d1)
    #12 testing::UnitTest::Run() /usr/src/googletest/googletest/src/gtest.cc:4259 (libgtest.so+0x74ae3)
    #13 RUN_ALL_TESTS() /usr/src/googletest/googletest/include/gtest/gtest.h:2233 (test_roscpp-test_transport_tcp+0x36a0c)
    #14 main /catkin/buildtmp/test_roscpp/src/test_roscpp/test/test_transport_tcp.cpp:424 (test_roscpp-test_transport_tcp+0x3549b)

SUMMARY: ThreadSanitizer: data race /usr/src/googletest/googletest/include/gtest/gtest.h:1392 in testing::AssertionResult testing::internal::CmpHelperEQ<bool, bool>(char const*, char const*, bool const&, bool const&)
==================
ThreadSanitizer: reported 16 warnings
